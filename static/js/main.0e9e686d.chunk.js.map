{"version":3,"sources":["util/createScreen.js","screen/system/DeadlineRenderSystem.js","util/parallaxCalculator.js","screen/system/BgRenderSystem.js","screen/system/ParticleSystem.js","screen/system/WallSystem.js","screen/system/WallRenderSystem.js","screen/system/PlayerRenderSystem.js","screen/system/ObstacleSystem.js","screen/system/ObstacleRenderSystem.js","screen/system/DebuffRenderSystem.js","screen/system/WatchSystem.js","screen/system/WatchRenderSystem.js","util/glyphLayout.js","util/loadFontFile.js","util/coordUtil.js","screen/genderEndScreen.js","screen/coinRenderSystem.js","screen/system/BuffListRenderSystem.js","screen/specialRenderSystem.js","screen/testScreen.js","screen/genderInstructionScreen.js","screen/genderChoosingScreen.js","index.js"],"names":["noop","createScreen","update","destroy","createDeadlineRenderSystem","width","height","deadLineAtlas","batch","deadlineBackGradient","findRegion","deadlineFrontGradient","singleNote","singlePaper","deadlineBase","singlePaperStackFrame","paperStackAnimation","createAnimation","findRegions","PARTICLE_SIZE","BG_WIDTH","BACK_GRADIENT_HEIGHT","BACK_GRADIENT_Y","BASE_HEIGHT","BASE_Y","FRONT_GRADIENT_HEIGHT","FRONT_GRADIENT_Y","PAPER_STACK_WIDTH","PAPER_STACK_HEIGHT","PAPER_STACK_Y","PAPER_STACK_ANIMATION_DELAY","i","Math","random","deadlineParticleTime","deadLineParticleRate","deadlineParticles","DEADLINE_PARTICLE_SPEED","DEADLINE_PARTICLE_DECELERATOR","setDeadLineParticleRate","rate","getDeadLineParticleRate","delta","stateTime","type","push","x","y","size","speedY","rotation","PI","particle","expired","length","splice","draw","PAPER_STACK_COUNT","getKeyFrame","PlayMode","LOOP_PINGPONG","results","calculateParallaxByOffset","displaySize","texSize","offset","current","startPoint","createBgRenderSystem","bg1","bg2","BG1_HEIGHT","BG2_HEIGHT","gap","drawStarts","drawStart","createParticleSystem","_height","noteTex","PLAYER_SIZE","particles","particleTime","PARTICLE_RANGE","duration","t","alpha","setColor","createWallSystem","wallStarts","obstacles","WALL_LENGTH","WALL_THICKNESS","latestWallStartGenerated","OBSTACLE_SIZE","screenY","floor","wallIndex","obstacleWidth","obstacleHeight","createWallRenderSystem","whiteTex","wallStart","fillRect","createPlayerRenderSystem","characterAtlas","slashAtlas","obstacleAtlas","watchAtlas","gender","outfit","runAnimationName","jumpAnimationName","runFrames","jumpFrames","runAnimation","jumpAnimation","transitionAnimation","slice","slashFrames","slashAnimation","buffAnimation","SLASH_X","SLASH_WIDTH","SLASH_HEIGHT","firstJump","flipped","jumping","jumpStart","buffTime","currentOutfit","transitionTime","specialTime","updateOutfit","originX","scaleX","NORMAL","LOOP","frame","createObstacleSystem","PROJECTILE_SPEED","PROJECTILE_SIZE","tmp","Vector2","obstacle","fired","abs","projectilePos","vel","set","rotateRad","projectileVel","projectileSize","projectileStart","setVector","scale","addVector","OBSTACLE_NAMES","createObstacleRenderSystem","animations","idleAnimations","bulletAnimations","projectileHitAnimation","coinAnimation","frames","hit","projectileHit","projectileHitTime","createDebuffRenderSystem","debuffs","obstacleHitBaseName","OBSTACLE_HIT_TYPE_NAME","sampleFrame","DEBUFF_WIDTH","DEBUFF_HEIGHT","obstacleHitAnimations","regions","debuff","time","offsetY","createWatchSystem","watches","WATCH_SIZE","timeUntilNextWatch","timeRandom","drawX","drawY","drawScale","createWatchRenderSystem","watchAnimations","watch","hitTime","checkKerning","id1","id2","kerningsData","check","amount","kerning","first","second","GlyphLayour","pageImage","keringsData","canvasWidth","addToCache","line","px","py","lineBreak","lineH","xAdvance","index","currChar","charCodeAt","preChar","key","kerningAmount","cache","xoffset","yoffset","xadvance","beforeDrawing","posX","posY","fontSize","CharSequence","preDraw","spaceXadvance","tmpLength","tmplist","char","maxSeq","max","newbase","baseLine","listCharSeq","trim","split","map","s","si","oriWidth","tmpRatio","fixedWidth","lineHeight","accumulate","tmpChar","j","key2","substring","id","positionBreak","lastBreakIndex","key3","getPositionBasedOnMode","lastLine","tmpXadvance","lastKey","oriHeight","align","round","setAlignMode","mode","setType","setLineHeight","setFixedGlyphWidth","fixedW","this","base","position","newBase","AlignMode","TextType","concatAndResolveUrl","url","concat","url1","url2","url3","l","pop","join","gl","packFileUrl","textureOptions","a","fetch","then","res","text","packFileContent","pages","regionsData","lines","tmp_array","push_to_kerning","undefined","tuple","filter","item","parseInt","left","top","page","region","id_page","face","bold","italic","charset","unicode","stretchH","smooth","aa","padding","spacing","outline","scaleW","scaleH","num_of_pages","packed","alphaChnl","redChnl","greenChnl","blueChnl","page_id","file","loadTexture","texture","invTextWidth","invTextHeight","regionData","invTexWidth","invTexHeight","TextureRegion","getLineHeight","getPages","getRegions","setNewText","checkPointInsideRect","point","verts","DEVICE_PIXEL_RATIO","minX","min","maxX","minY","maxY","createEndScreen","Game","coinCount","distance","goToChoosingScreen","createGenderChoosingScreen","setCurrentScreen","canvas","font","pixelRatio","endScreen","assets","achive1","achive2","achive3","createWhiteTex","inputHandler","InputHandler","createBatch","camera","createOrthoCamera","retry","reward","buttonH","buttonW","girl","man","girl_size","man_size","coin","lengthHaveGone","watchCount","eScreenH","eScreenW","achiveH","achiveW","ratio_list","rest_ratio","startCount","girlY","manY","link_rect","reset_rect","addEventListener","window","location","href","setPosition","setProjection","combined","begin","end","cleanup","renderCoin","coinImage","coinW","coinH","createBuffListRenderSystem","watchList","watchSize","tmpDistance","buffs","state","specialButton","button","buttonR","createTestScreen","JUMP_SPEED_X","hasBuff","hasSpecial","speedX","NORMAL_SPEED_Y","targetGap","INITIAL_GAP","checkTouch","useSpecial","jump","document","checkLanding","newX","landing","processPlayerPos","modifier","deltaX","processWatchCollsion","pL","pR","pT","pB","oL","oR","oT","oB","processObstacleCollision","hitted","oWidth","oHeight","pos","deadlineRenderSystem","MAXIMUM_DEADLINE_RATE","OUTFIT_COIN_REQUIRED","SPEED_MODIFIERS","processOutfit","bgRenderSystem","particleSystem","wallSystem","wallRenderSystem","playerRenderSystem","obstacleSystem","obstacleRenderSystem","debuffRenderSystem","watchSystem","watchRenderSystem","CoinRender","buffRender","check_lost","removeEventListener","createInstructionScreen","goToGameScreen","instruction","instrucH","instrucW","text1","text2","text3","fontsize","goToInstructionScreen","title","newText","createWhiteTexture","woman","tray","BG_HEIGHT","HUMAN_HEIGHT","WOMAN_WIDTH","MAN_WIDTH","TRAY_WIDTH","TRAY_HEIGHT","trayX","trayY","man_rect","woman_rect","getElementById","loading","resizeCanvas","getContext","loadFontFile","screen","currentScreen","count","innerHTML","doAndCount","promise","result","Promise","all","loadAtlas","manjump","style","display","clearColor","clear","COLOR_BUFFER_BIT","createGameLoop","init"],"mappings":"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","file":"static/js/main.0e9e686d.chunk.js","sourcesContent":["const noop = () => {};\n\nconst createScreen = ({ update = noop, destroy = noop }) => {\n  return { update, destroy };\n};\n\nexport default createScreen;\n","import { createAnimation } from 'gdxjs';\nimport { PlayMode } from 'gdxjs/lib/createAnimation';\n\nexport const createDeadlineRenderSystem = (width, height, deadLineAtlas, batch) => {\n  const deadlineBackGradient = deadLineAtlas.findRegion('deadline-back-gradient');\n  const deadlineFrontGradient = deadLineAtlas.findRegion('deadline-front-gradient');\n  const singleNote = deadLineAtlas.findRegion('single-note');\n  const singlePaper = deadLineAtlas.findRegion('single-paper');\n  const deadlineBase = deadLineAtlas.findRegion('deadline-base');\n  const singlePaperStackFrame = deadLineAtlas.findRegion('paper_stack');\n  const paperStackAnimation = createAnimation(0.1, deadLineAtlas.findRegions('paper_stack'));\n\n  const PARTICLE_SIZE = width / 30;\n  const BG_WIDTH = width;\n  const BACK_GRADIENT_HEIGHT = (BG_WIDTH / deadlineBackGradient.width) * deadlineBackGradient.height;\n  const BACK_GRADIENT_Y = height - BACK_GRADIENT_HEIGHT;\n  const BASE_HEIGHT = (BG_WIDTH / deadlineBase.width) * deadlineBase.height;\n  const BASE_Y = height - BASE_HEIGHT / 2;\n  const FRONT_GRADIENT_HEIGHT = (BG_WIDTH / deadlineFrontGradient.width) * deadlineFrontGradient.height;\n  const FRONT_GRADIENT_Y = height - FRONT_GRADIENT_HEIGHT;\n\n  const PAPER_STACK_COUNT = 4;\n  const PAPER_STACK_WIDTH = width / PAPER_STACK_COUNT;\n  const PAPER_STACK_HEIGHT = (PAPER_STACK_WIDTH / singlePaperStackFrame.width) * singlePaperStackFrame.height;\n  const PAPER_STACK_Y = height - PAPER_STACK_HEIGHT;\n  const PAPER_STACK_ANIMATION_DELAY = [];\n  for (let i = 0; i < PAPER_STACK_COUNT; i++) {\n    PAPER_STACK_ANIMATION_DELAY[i] = Math.random() * 0.5;\n  }\n\n  let deadlineParticleTime = 0;\n  let deadLineParticleRate = 0.15;\n  const deadlineParticles = [];\n  const DEADLINE_PARTICLE_SPEED = -height / 2;\n  const DEADLINE_PARTICLE_DECELERATOR = height * 0.75;\n\n  return {\n    setDeadLineParticleRate(rate) {\n      deadLineParticleRate = rate;\n    },\n    getDeadLineParticleRate() {\n      return deadLineParticleRate;\n    },\n    update(delta, stateTime) {\n      deadlineParticleTime += delta;\n      while (deadlineParticleTime >= deadLineParticleRate) {\n        deadlineParticleTime -= deadLineParticleRate;\n        const type = Math.random() > 0.5 ? 0 : 1;\n        deadlineParticles.push({\n          x: Math.random() * width,\n          y: height,\n          size: type === 0 ? PARTICLE_SIZE * 2 : PARTICLE_SIZE,\n          speedY: DEADLINE_PARTICLE_SPEED,\n          type,\n          rotation: (Math.random() * Math.PI) / 2\n        });\n      }\n\n      for (let particle of deadlineParticles) {\n        particle.speedY += DEADLINE_PARTICLE_DECELERATOR * delta;\n        particle.y = particle.y + particle.speedY * delta;\n        if (particle.y > height) {\n          particle.expired = true;\n        }\n      }\n\n      for (let i = deadlineParticles.length - 1; i >= 0; i--) {\n        if (deadlineParticles[i].expired) {\n          deadlineParticles.splice(i, 1);\n        }\n      }\n\n      deadlineBackGradient.draw(batch, 0, BACK_GRADIENT_Y, BG_WIDTH, BACK_GRADIENT_Y);\n      deadlineBase.draw(batch, 0, BASE_Y, BG_WIDTH, BASE_HEIGHT);\n      for (let i = 0; i < PAPER_STACK_COUNT - 1; i++) {\n        paperStackAnimation\n          .getKeyFrame(stateTime + PAPER_STACK_ANIMATION_DELAY[i], PlayMode.LOOP_PINGPONG)\n          .draw(batch, PAPER_STACK_WIDTH * i + PAPER_STACK_WIDTH / 2, PAPER_STACK_Y - PAPER_STACK_HEIGHT / 8, PAPER_STACK_WIDTH, PAPER_STACK_HEIGHT);\n      }\n      for (let particle of deadlineParticles) {\n        (particle.type === 0 ? singlePaper : singleNote).draw(\n          batch,\n          particle.x,\n          particle.y,\n          particle.size,\n          particle.size,\n          particle.size / 2,\n          particle.size / 2,\n          particle.rotation\n        );\n      }\n      for (let i = 0; i < PAPER_STACK_COUNT; i++) {\n        paperStackAnimation\n          .getKeyFrame(stateTime + PAPER_STACK_ANIMATION_DELAY[i], PlayMode.LOOP_PINGPONG)\n          .draw(batch, PAPER_STACK_WIDTH * i, PAPER_STACK_Y, PAPER_STACK_WIDTH, PAPER_STACK_HEIGHT);\n      }\n      deadlineFrontGradient.draw(batch, 0, FRONT_GRADIENT_Y, BG_WIDTH, FRONT_GRADIENT_HEIGHT);\n    }\n  };\n};\n","const results = [];\n\nexport const calculateParallaxByOffset = (displaySize, texSize, offset) => {\n  results.length = 0;\n  let current = offset;\n  while (current > displaySize) {\n    current -= texSize;\n  }\n  while (current < -texSize) {\n    current += texSize;\n  }\n  const startPoint = current;\n  do {\n    results.push(current);\n    current += texSize;\n  } while (current < displaySize);\n  current = startPoint;\n  while (current > 0) {\n    current -= texSize;\n    results.push(current);\n  }\n  return results;\n};\n\nexport const calculateParallaxBySpeed = (\n  stateTime,\n  displaySize,\n  texSize,\n  speed\n) => {\n  const offset = speed * stateTime;\n  return calculateParallaxByOffset(displaySize, texSize, offset);\n};\n","import { calculateParallaxByOffset } from '../../util/parallaxCalculator';\n\nexport const createBgRenderSystem = (width, height, bg1, bg2, batch) => {\n  const BG_WIDTH = width;\n  const BG1_HEIGHT = (BG_WIDTH / bg1.width) * bg1.height;\n  const BG2_HEIGHT = (BG_WIDTH / bg2.width) * bg2.height;\n\n  return {\n    update(delta, y, gap) {\n      let drawStarts = calculateParallaxByOffset(height, BG2_HEIGHT, (-y + gap) * 0.5);\n      for (let drawStart of drawStarts) {\n        batch.draw(bg2, 0, drawStart, BG_WIDTH, BG2_HEIGHT);\n      }\n\n      drawStarts = calculateParallaxByOffset(height, BG1_HEIGHT, -y + gap);\n      for (let drawStart of drawStarts) {\n        batch.draw(bg1, 0, drawStart, BG_WIDTH, BG1_HEIGHT);\n      }\n    }\n  };\n};\n","export const createParticleSystem = (width, _height, noteTex, batch, PLAYER_SIZE) => {\n  const particles = [];\n  let particleTime = 0;\n  const PARTICLE_RATE = 0.075;\n  const PARTICLE_DURATION = 3;\n  const PARTICLE_SIZE = width / 30;\n  const PARTICLE_RANGE = width / 7.5;\n\n  return {\n    update(delta, x, y, speedY) {\n      particleTime += delta;\n      while (particleTime >= PARTICLE_RATE) {\n        particleTime -= PARTICLE_RATE;\n        particles.push({\n          x: x + PLAYER_SIZE / 2 + (Math.random() - 0.5) * PARTICLE_RANGE,\n          y: y + PLAYER_SIZE / 2 + (Math.random() - 0.5) * PARTICLE_RANGE,\n          speedY: speedY / 2,\n          type: Math.random() < 0.3 ? 0 : Math.random() < 0.5 ? 1 : 2,\n          rotation: (Math.random() * Math.PI) / 2,\n          duration: Math.random() * PARTICLE_DURATION,\n          t: 0,\n          size: PARTICLE_SIZE\n        });\n      }\n\n      for (let particle of particles) {\n        particle.t += delta;\n        particle.y += particle.speedY * delta;\n      }\n      for (let i = particles.length - 1; i >= 0; i--) {\n        const particle = particles[i];\n        if (particle.t >= particle.duration) {\n          particles.splice(i, 1);\n        }\n      }\n    },\n    draw() {\n      for (let particle of particles) {\n        let alpha = (particle.duration - particle.t) / particle.duration;\n        alpha = alpha * alpha * (3 - 2 * alpha);\n        batch.setColor(0, 0, 0, 0.75 * alpha);\n        batch.draw(\n          noteTex,\n          particle.x - particle.size / 2 + particle.size / 5,\n          particle.y - particle.size / 2 + particle.size / 5,\n          particle.size,\n          particle.size,\n          particle.size / 2,\n          particle.size / 2,\n          particle.rotation\n        );\n        particle.type === 0 && batch.setColor(1, 0.494, 0.725, alpha);\n        particle.type === 1 && batch.setColor(0.478, 0.988, 1, alpha);\n        particle.type === 2 && batch.setColor(1, 0.969, 0.251, alpha);\n        batch.draw(\n          noteTex,\n          particle.x - particle.size / 2,\n          particle.y - particle.size / 2,\n          particle.size,\n          particle.size,\n          particle.size / 2,\n          particle.size / 2,\n          particle.rotation\n        );\n        batch.setColor(1, 1, 1, 1);\n      }\n    }\n  };\n};\n","export const createWallSystem = (width, height, wallStarts, obstacles, WALL_LENGTH, WALL_THICKNESS, gap) => {\n  let latestWallStartGenerated = WALL_LENGTH;\n  const obstacleChance = 0.4;\n  const OBSTACLE_SIZE = width / 10;\n\n  return {\n    update(delta, y, gap) {\n      const screenY = y + gap;\n      for (let i = wallStarts.length - 1; i >= 0; i--) {\n        const wallStart = wallStarts[i];\n        if (wallStart - WALL_LENGTH > screenY) {\n          wallStarts.splice(i, 1);\n        }\n      }\n      for (let i = obstacles.length - 1; i >= 0; i--) {\n        const obstacle = obstacles[i];\n        if (obstacle.y > wallStarts[0]) {\n          obstacles.splice(i, 1);\n        }\n      }\n      while (latestWallStartGenerated > screenY - 2 * height - WALL_LENGTH) {\n        latestWallStartGenerated -= WALL_LENGTH;\n        wallStarts.push(latestWallStartGenerated);\n        if (latestWallStartGenerated > -height) {\n          continue;\n        }\n        if (Math.random() <= obstacleChance) {\n          const type = Math.floor(Math.random() * 4);\n          const wallIndex = Math.random() > 0.5 ? 0 : 1;\n          const obstacleWidth = type === 0 ? OBSTACLE_SIZE * 3 : OBSTACLE_SIZE * 2;\n          const obstacleHeight = type === 0 ? OBSTACLE_SIZE / 2 : OBSTACLE_SIZE * 2;\n          obstacles.push({\n            wallIndex,\n            y: type === 0 ? latestWallStartGenerated - WALL_LENGTH : latestWallStartGenerated - WALL_LENGTH - obstacleHeight * 0.9,\n            type,\n            width: obstacleWidth,\n            height: obstacleHeight,\n            x: wallIndex === 0 ? WALL_THICKNESS : width - WALL_THICKNESS - obstacleWidth\n          });\n        }\n      }\n    }\n  };\n};\n","import { fillRect } from 'gdxjs';\n\nexport const createWallRenderSystem = (width, height, whiteTex, batch, wallStarts, WALL_LENGTH, WALL_THICKNESS) => {\n  return {\n    draw() {\n      batch.setColor(0, 0, 0, 0.75);\n      for (let wallStart of wallStarts) {\n        fillRect(batch, whiteTex, 0, wallStart - WALL_LENGTH, WALL_THICKNESS, WALL_LENGTH);\n        fillRect(batch, whiteTex, width - WALL_THICKNESS, wallStart - WALL_LENGTH, WALL_THICKNESS, WALL_LENGTH);\n      }\n      batch.setColor(1, 1, 1, 1);\n    }\n  };\n};\n","import { createAnimation } from 'gdxjs';\nimport { PlayMode } from 'gdxjs/lib/createAnimation';\n\nexport const createPlayerRenderSystem = (width, height, batch, characterAtlas, slashAtlas, obstacleAtlas, watchAtlas, PLAYER_SIZE, gender, outfit) => {\n  let runAnimationName = `${gender === 0 ? 'man' : 'girl'}_running_${outfit + 1}`;\n  let jumpAnimationName = `${gender === 0 ? 'man' : 'girl'}_jump_${outfit + 1}`;\n  let runFrames = characterAtlas.findRegions(runAnimationName);\n  let jumpFrames = characterAtlas.findRegions(jumpAnimationName);\n  let runAnimation = createAnimation(0.05, runFrames);\n  let jumpAnimation = createAnimation(0.1, jumpFrames);\n\n  const updateOutfit = outfit => {\n    runAnimationName = `${gender === 0 ? 'man' : 'girl'}_running_${outfit + 1}`;\n    jumpAnimationName = `${gender === 0 ? 'man' : 'girl'}_jump_${outfit + 1}`;\n    runFrames = characterAtlas.findRegions(runAnimationName);\n    jumpFrames = characterAtlas.findRegions(jumpAnimationName);\n    runAnimation = createAnimation(0.05, runFrames);\n    jumpAnimation = createAnimation(0.1, jumpFrames);\n  };\n\n  const transitionAnimation = createAnimation(0.05, obstacleAtlas.findRegions('bullet_hit').slice(1, -1));\n  const slashFrames = slashAtlas.findRegions('slash');\n  const slashAnimation = createAnimation(0.03, slashFrames);\n  const buffAnimation = createAnimation(0.1, watchAtlas.findRegions('watch_buff'));\n\n  const SLASH_X = width * 0.1;\n  const SLASH_WIDTH = width * 0.8;\n  const SLASH_HEIGHT = (SLASH_WIDTH * slashFrames[0].height) / slashFrames[0].width;\n  let firstJump = true;\n\n  return {\n    draw(x, y, flipped, jumping, stateTime, jumpStart, buffTime, currentOutfit, transitionTime, specialTime) {\n      if (outfit !== currentOutfit) {\n        outfit = currentOutfit;\n        updateOutfit(outfit);\n      }\n      const originX = PLAYER_SIZE / 2;\n      const originY = 0;\n      const scaleX = flipped ? 1 : -1;\n\n      if (transitionTime > stateTime - 0.1) {\n        batch.setColor(0.478, 0.988, 1, 1);\n        transitionAnimation.getKeyFrame(stateTime - transitionTime, PlayMode.LOOP_PINGPONG).draw(batch, x, y, PLAYER_SIZE * 2, PLAYER_SIZE);\n        batch.setColor(1, 1, 1, 1);\n        return;\n      }\n\n      if (!firstJump) {\n        slashAnimation\n          .getKeyFrame(stateTime - jumpStart, PlayMode.NORMAL)\n          .draw(batch, SLASH_X, y, SLASH_WIDTH, SLASH_HEIGHT, SLASH_WIDTH / 2, SLASH_HEIGHT / 2, 0, scaleX, 1.5);\n      }\n\n      if (!jumping) {\n        runAnimation.getKeyFrame(stateTime, PlayMode.LOOP).draw(batch, x, y, PLAYER_SIZE, PLAYER_SIZE, originX, originY, 0, scaleX, 1);\n      } else {\n        firstJump = false;\n        jumpAnimation\n          .getKeyFrame(stateTime - jumpStart, PlayMode.NORMAL)\n          .draw(batch, x, y, (PLAYER_SIZE * 150) / 115, PLAYER_SIZE, originX, originY, 0, scaleX, 1);\n      }\n\n      // buff animation\n      if (buffTime >= stateTime) {\n        const frame = buffAnimation.getKeyFrame(stateTime - (buffTime - 2.5), PlayMode.LOOP_PINGPONG);\n        frame && frame.draw(batch, x, y, PLAYER_SIZE, PLAYER_SIZE, PLAYER_SIZE / 2, PLAYER_SIZE / 2, 0, 1.5, 1.5);\n      }\n\n      if (specialTime >= stateTime) {\n        const frame = buffAnimation.getKeyFrame(stateTime - (specialTime - 2.5), PlayMode.LOOP_PINGPONG);\n        frame && frame.draw(batch, x, y, PLAYER_SIZE, PLAYER_SIZE, PLAYER_SIZE / 2, PLAYER_SIZE / 2, 0, 1.5, 1.5);\n      }\n    }\n  };\n};\n","import { Vector2 } from 'gdxjs';\n\nexport const createObstacleSystem = (width, height, obstacles, WALL_LENGTH, WALL_THICKNESS, PROJECTILE_SPEED, PROJECTILE_SIZE) => {\n  const tmp = new Vector2();\n\n  return {\n    update(delta, y, stateTime) {\n      for (let obstacle of obstacles) {\n        if (obstacle.type > 0 && !obstacle.fired && Math.abs(obstacle.y - y) < WALL_LENGTH) {\n          obstacle.fired = true;\n          obstacle.projectilePos = new Vector2(obstacle.wallIndex === 0 ? WALL_THICKNESS : width - WALL_THICKNESS, obstacle.y);\n          const vel = new Vector2();\n          vel.set(obstacle.wallIndex === 0 ? PROJECTILE_SPEED : -PROJECTILE_SPEED, 0);\n          const rotation = -(Math.random() * Math.PI) / 6 - Math.PI / 18;\n          vel.rotateRad(obstacle.wallIndex === 0 ? rotation : -rotation);\n          obstacle.projectileVel = vel;\n          obstacle.projectileSize = PROJECTILE_SIZE;\n          obstacle.projectileStart = stateTime;\n        }\n        if (obstacle.fired) {\n          tmp.setVector(obstacle.projectileVel).scale(delta);\n          obstacle.projectilePos.addVector(tmp);\n        }\n      }\n    }\n  };\n};\n","import { fillRect, createAnimation } from 'gdxjs';\nimport { PlayMode } from 'gdxjs/lib/createAnimation';\n\nconst OBSTACLE_NAMES = [null, 'bed', 'bath', 'tivi'];\n\nexport const createObstacleRenderSystem = (whiteTex, batch, obstacles, obstacleAtlas) => {\n  const animations = [];\n  const idleAnimations = [];\n  const bulletAnimations = [];\n\n  const projectileHitAnimation = createAnimation(0.05, obstacleAtlas.findRegions('bullet_hit').slice(1, -1));\n  const coinAnimation = createAnimation(0.05, obstacleAtlas.findRegions('coin'));\n\n  for (let i = 0; i < OBSTACLE_NAMES.length; i++) {\n    if (i === 0) continue;\n    const frames = obstacleAtlas.findRegions(OBSTACLE_NAMES[i]);\n    animations[i] = createAnimation(0.1, frames);\n    idleAnimations[i] = createAnimation(0.1, frames.slice(0, 4));\n    bulletAnimations[i] = createAnimation(0.1, obstacleAtlas.findRegions(`${OBSTACLE_NAMES[i]}_bullet`));\n  }\n\n  return {\n    draw(stateTime) {\n      for (let obstacle of obstacles) {\n        const scaleX = obstacle.wallIndex === 0 ? -1 : 1;\n        if (obstacle.type === 0) {\n          batch.setColor(0, 0, 0, 0.75);\n          !obstacle.hit && fillRect(batch, whiteTex, obstacle.x, obstacle.y, obstacle.width, obstacle.height);\n          batch.setColor(1, 1, 1, 1);\n        } else {\n          if (obstacle.fired) {\n            !obstacle.hit &&\n              animations[obstacle.type]\n                .getKeyFrame(stateTime - obstacle.projectileStart, PlayMode.NORMAL)\n                .draw(batch, obstacle.x, obstacle.y, obstacle.width, obstacle.height, obstacle.width / 2, obstacle.height, 0, scaleX * 1.5, 1.5);\n            if (obstacle.projectileHit) {\n              if (stateTime - obstacle.projectileHitTime <= 11 * 0.05) {\n                batch.setColor(0, 0, 0, 0.25);\n                projectileHitAnimation\n                  .getKeyFrame(stateTime - obstacle.projectileHitTime, PlayMode.NORMAL)\n                  .draw(\n                    batch,\n                    obstacle.projectilePos.x - obstacle.projectileSize,\n                    obstacle.projectilePos.y,\n                    obstacle.projectileSize * 2,\n                    obstacle.projectileSize,\n                    obstacle.projectileSize,\n                    obstacle.projectileSize / 2,\n                    0,\n                    1.5,\n                    1.5\n                  );\n                batch.setColor(1, 1, 1, 1);\n                projectileHitAnimation\n                  .getKeyFrame(stateTime - obstacle.projectileHitTime, PlayMode.NORMAL)\n                  .draw(\n                    batch,\n                    obstacle.projectilePos.x - obstacle.projectileSize + obstacle.projectileSize * 0.05,\n                    obstacle.projectilePos.y + obstacle.projectileSize * 0.05,\n                    obstacle.projectileSize * 2,\n                    obstacle.projectileSize,\n                    obstacle.projectileSize,\n                    obstacle.projectileSize / 2,\n                    0,\n                    1.5,\n                    1.5\n                  );\n                coinAnimation\n                  .getKeyFrame(stateTime - obstacle.projectileHitTime, PlayMode.NORMAL)\n                  .draw(\n                    batch,\n                    obstacle.projectilePos.x,\n                    obstacle.projectilePos.y + obstacle.projectileSize / 2,\n                    obstacle.projectileSize,\n                    (obstacle.projectileSize / 8) * 10,\n                    obstacle.projectileSize / 2,\n                    0,\n                    0,\n                    2,\n                    2\n                  );\n              }\n            } else {\n              bulletAnimations[obstacle.type]\n                .getKeyFrame(stateTime, PlayMode.LOOP_PINGPONG)\n                .draw(\n                  batch,\n                  obstacle.projectilePos.x - obstacle.projectileSize / 2,\n                  obstacle.projectilePos.y - obstacle.projectileSize / 2,\n                  obstacle.projectileSize,\n                  obstacle.projectileSize,\n                  obstacle.projectileSize / 2,\n                  obstacle.projectileSize / 2,\n                  0,\n                  1.2,\n                  1.2\n                );\n            }\n          } else {\n            !obstacle.hit &&\n              idleAnimations[obstacle.type]\n                .getKeyFrame(stateTime, PlayMode.LOOP_PINGPONG)\n                .draw(batch, obstacle.x, obstacle.y, obstacle.width, obstacle.height, obstacle.width / 2, obstacle.height, 0, scaleX * 1.5, 1.5);\n          }\n        }\n      }\n    }\n  };\n};\n","import { createAnimation, fillRect } from 'gdxjs';\nimport { PlayMode } from 'gdxjs/lib/createAnimation';\n\nexport const createDebuffRenderSystem = (width, height, whiteTex, batch, debuffs, obstacleAtlas, gender, outfit) => {\n  const obstacleHitBaseName = `ob_${gender === 0 ? 'man' : 'girl'}`;\n\n  const OBSTACLE_HIT_TYPE_NAME = [null, `${obstacleHitBaseName}_2`, `${obstacleHitBaseName}_3`, `${obstacleHitBaseName}_1`];\n\n  const sampleFrame = obstacleAtlas.findRegion('ob_man_1');\n\n  const DEBUFF_WIDTH = width / 2;\n  const DEBUFF_HEIGHT = (DEBUFF_WIDTH * sampleFrame.height) / sampleFrame.width;\n\n  const obstacleHitAnimations = [];\n  for (let i = 0; i < OBSTACLE_HIT_TYPE_NAME.length; i++) {\n    if (i === 0) continue;\n    const regions = obstacleAtlas.findRegions(OBSTACLE_HIT_TYPE_NAME[i]);\n    obstacleHitAnimations[i] = createAnimation(0.05, regions);\n  }\n\n  return {\n    draw(stateTime, y) {\n      if (debuffs.length > 0) {\n        batch.setColor(0, 0, 0, 0.5);\n        fillRect(batch, whiteTex, 0, y - height, width, height * 2);\n        batch.setColor(1, 1, 1, 1);\n      }\n      for (let debuff of debuffs) {\n        if (debuff.type === 0) continue;\n        const animation = obstacleHitAnimations[debuff.type];\n        animation\n          .getKeyFrame(stateTime - debuff.time, PlayMode.NORMAL)\n          .draw(\n            batch,\n            debuff.x - DEBUFF_WIDTH / 2,\n            y + 2 * debuff.offsetY - DEBUFF_HEIGHT / 2,\n            DEBUFF_WIDTH,\n            DEBUFF_HEIGHT,\n            DEBUFF_WIDTH / 2,\n            DEBUFF_HEIGHT / 2,\n            0,\n            debuff.flipped ? 1 : -1,\n            1\n          );\n      }\n    }\n  };\n};\n","export const createWatchSystem = (width, height, watches) => {\n  const WATCH_SIZE = width / 5;\n  let timeUntilNextWatch = 5;\n  let timeRandom = 0;\n  return {\n    update(delta, stateTime, y, outfit) {\n      timeUntilNextWatch -= delta;\n      if (timeUntilNextWatch <= 0) {\n        switch (outfit) {\n          case 0:\n            timeRandom = Math.random() * 10 - 6 + 6;\n            break;\n          case 1:\n            timeRandom = Math.random() * 6 - 4 + 4;\n            break;\n          case 2:\n            timeRandom = Math.random() * 10 - 4 + 4;\n            break;\n          default:\n            break;\n        }\n        timeUntilNextWatch = timeRandom;\n        watches.push({\n          x: width / 2,\n          y: y - height,\n          drawX: width / 2,\n          drawY: y - height,\n          drawScale: 1,\n          time: stateTime,\n          width: WATCH_SIZE,\n          height: WATCH_SIZE,\n          type: Math.floor(Math.random() * 3)\n        });\n      }\n      for (let i = watches.length - 1; i >= 0; i--) {\n        if (watches[i].y > y + 2 * height) {\n          watches.splice(i, 1);\n        }\n      }\n    }\n  };\n};\n","import { createAnimation } from 'gdxjs';\nimport { PlayMode } from 'gdxjs/lib/createAnimation';\n\nexport const createWatchRenderSystem = (width, height, batch, watchAtlas, watches, PLAYER_SIZE) => {\n  const watchAnimations = [];\n  for (let i = 0; i < 3; i++) {\n    watchAnimations.push(createAnimation(0.1, watchAtlas.findRegions(`watch_${i + 1}`)));\n  }\n  return {\n    draw(stateTime, x, y) {\n      for (let watch of watches) {\n        if (stateTime - watch.hitTime > 0.5) {\n          continue;\n        }\n        if (watch.hit) {\n          watch.drawX = watch.drawX + (x + PLAYER_SIZE / 2 - watch.drawX) * 0.2;\n          watch.drawY = watch.drawY + (y - watch.drawY) * 0.2;\n          watch.drawScale = watch.drawScale + (0.5 - watch.drawScale) * 0.2;\n        }\n        watchAnimations[watch.type]\n          .getKeyFrame(stateTime, PlayMode.LOOP)\n          .draw(\n            batch,\n            watch.drawX - watch.width / 2,\n            watch.drawY - watch.height / 2,\n            watch.width,\n            watch.height,\n            watch.width / 2,\n            watch.height / 2,\n            0,\n            watch.drawScale,\n            watch.drawScale\n          );\n      }\n    }\n  };\n};\n","import { Vector2 } from 'gdxjs';\r\n\r\nconst checkKerning = (id1, id2, kerningsData) => {\r\n  let check = false;\r\n  let amount = 0;\r\n  for (let kerning of kerningsData) {\r\n    if (kerning.first === id1 && kerning.second === id2) {\r\n      amount = kerning.amount;\r\n      check = true;\r\n      break;\r\n    } else {\r\n      check = false;\r\n    }\r\n  }\r\n  if (check) {\r\n    return amount;\r\n  } else {\r\n    return 0;\r\n  }\r\n};\r\n\r\nexport default class GlyphLayour {\r\n  constructor(pageImage, regions, keringsData, canvasWidth) {\r\n    this.pageImage = pageImage;\r\n    this.regions = regions;\r\n    this.kerningsData = keringsData;\r\n    this.canvasWidth = canvasWidth;\r\n    // this.canvasHeight = canvas.height;\r\n    this.type = 0;\r\n    this.align = 2;\r\n    this.lineHeight = pageImage.lineHeight;\r\n    this.baseLine = pageImage.base;\r\n    this.fixedWidth = canvasWidth;\r\n    // this.fixedHeight = canvas.height;\r\n    // temp variable\r\n    this.position = new Vector2(0, 0);\r\n    this.scale = 0;\r\n    this.newBase = 0;\r\n    this.oriWidth = 0;\r\n    this.oriHeight = 0;\r\n    this.positionBreak = []; // list of break-position's index\r\n    this.lastBreakIndex = 0;\r\n    // pre draw\r\n    this.cache = [];\r\n    this.preDraw = true;\r\n  }\r\n  addToCache = (line, px, py, lineBreak, lineH) => {\r\n    let xAdvance = 0;\r\n    for (let index = 0; index < line.length; index++) {\r\n      const currChar = line.charCodeAt(index);\r\n      const preChar = line.charCodeAt(index - 1);\r\n      let key = this.findRegions(currChar);\r\n      let kerningAmount = checkKerning(currChar, preChar, this.kerningsData);\r\n      this.cache.push({\r\n        key: key,\r\n        x: px + xAdvance + key.xoffset * this.scale + kerningAmount * this.scale,\r\n        y: py + key.yoffset * this.scale + lineBreak * this.scale + lineH,\r\n        width: key.width * this.scale,\r\n        height: key.height * this.scale\r\n      });\r\n      xAdvance += key.xadvance * this.scale;\r\n    }\r\n  };\r\n\r\n  beforeDrawing = (posX, posY, fontSize, CharSequence) => {\r\n    if (this.preDraw) {\r\n      let spaceXadvance = 0;\r\n      let tmpLength = 0;\r\n      let tmplist = [];\r\n      // find longest sequence\r\n      for (let i = 0; i < CharSequence.length; i++) {\r\n        const char = CharSequence.charCodeAt(i);\r\n        const key = this.findRegions(char);\r\n        if (char !== 32) {\r\n          tmpLength += key.xadvance * this.scale;\r\n        } else {\r\n          spaceXadvance = key.xadvance * this.scale;\r\n          tmplist.push(tmpLength);\r\n          tmpLength = 0;\r\n        }\r\n      }\r\n      let maxSeq = Math.max(...tmplist) + spaceXadvance;\r\n      //////////////////\r\n      this.newbase = fontSize;\r\n      this.scale = this.newbase / this.baseLine;\r\n      CharSequence = CharSequence.trim();\r\n\r\n      // split string between /n\r\n      let listCharSeq = CharSequence.split('/n').map(s => s.trim());\r\n      let lineH = 0;\r\n      for (let si = 0; si < listCharSeq.length; si++) {\r\n        CharSequence = listCharSeq[si];\r\n        // find new origin Width for each line\r\n        this.oriWidth = 0;\r\n        for (let i = 0; i < CharSequence.length; i++) {\r\n          const char = CharSequence.charCodeAt(i);\r\n          const key = this.findRegions(char);\r\n          if (i < CharSequence.length - 1) {\r\n            this.oriWidth += key.xadvance * this.scale;\r\n          } else {\r\n            this.oriWidth += key.width * this.scale;\r\n          }\r\n        }\r\n        let tmpRatio = this.oriWidth / this.fixedWidth;\r\n        lineH = this.lineHeight * this.scale * si;\r\n        let accumulate = 0;\r\n        let tmpChar = '';\r\n        let lineBreak = 0;\r\n        // finding position break and length of each line\r\n        // only execute if oriWidth > fixedWidth and fixedWidth > longest seq\r\n        if (tmpRatio > 1 && this.fixedWidth > maxSeq) {\r\n          for (let i = 0; i < CharSequence.length; i++) {\r\n            tmpChar += CharSequence[i];\r\n            const char = CharSequence.charCodeAt(i);\r\n            const key = this.findRegions(char);\r\n            accumulate += key.xadvance * this.scale;\r\n            // every line before last line\r\n            if (accumulate >= this.fixedWidth) {\r\n              let j = i;\r\n              while (j >= 0) {\r\n                i--;\r\n                j--;\r\n                const key2 = this.findRegions(CharSequence.charCodeAt(i));\r\n                accumulate -= key2.xadvance * this.scale;\r\n                tmpChar = tmpChar.substring(0, tmpChar.length - 1);\r\n                if (accumulate <= this.fixedWidth && key2.id === 32) {\r\n                  lineBreak = this.lineHeight * this.positionBreak.length;\r\n                  this.positionBreak.push(i); ///\r\n                  this.lastBreakIndex = i;\r\n                  const line = tmpChar.trim();\r\n                  let tmp = 0;\r\n                  let key3 = 0;\r\n\r\n                  for (let index = 0; index < line.length; index++) {\r\n                    key3 = this.findRegions(line.charCodeAt(index));\r\n                    if (index === line.length - 1) {\r\n                      tmp += key3.width * this.scale;\r\n                    } else {\r\n                      tmp += key3.xadvance * this.scale;\r\n                    }\r\n                  }\r\n                  let [px, py] = this.getPositionBasedOnMode(posX, posY, tmp);\r\n\r\n                  this.addToCache(line, px, py, lineBreak, lineH);\r\n\r\n                  accumulate = 0;\r\n                  j = -1;\r\n                  tmpChar = '';\r\n                }\r\n              }\r\n            }\r\n            // last line\r\n            if (i === CharSequence.length - 1 && accumulate < this.oriWidth) {\r\n              let tmpChar = '';\r\n              for (let j = this.lastBreakIndex; j <= i; j++) {\r\n                tmpChar += CharSequence[j];\r\n              }\r\n              const lastLine = tmpChar.trim();\r\n              let tmpXadvance = 0;\r\n              let lastKey = 0;\r\n              for (let index = 0; index < lastLine.length; index++) {\r\n                lastKey = this.findRegions(lastLine.charCodeAt(index));\r\n                if (index === lastLine.length - 1) {\r\n                  tmpXadvance += lastKey.width * this.scale;\r\n                } else {\r\n                  tmpXadvance += lastKey.xadvance * this.scale;\r\n                }\r\n              }\r\n              let [px, py] = this.getPositionBasedOnMode(posX, posY, tmpXadvance);\r\n              lineBreak = this.lineHeight * this.positionBreak.length;\r\n              this.addToCache(lastLine, px, py, lineBreak, lineH);\r\n            }\r\n          }\r\n\r\n          // this.oriHeight = this.newbase;\r\n          // this.preDraw = false;\r\n        }\r\n        // if originWidth < fixedWidth or fixedWidth < longest sequence\r\n        if (tmpRatio <= 1 || this.fixedWidth < maxSeq) {\r\n          let [px, py] = this.getPositionBasedOnMode(posX, posY, this.oriWidth);\r\n          this.addToCache(CharSequence, px, py, 0, lineH);\r\n          // this.preDraw = false;\r\n          // this.oriHeight = this.newbase;\r\n        }\r\n      }\r\n      if (this.type === 0) {\r\n        this.preDraw = false;\r\n      }\r\n      this.oriHeight = this.newbase;\r\n    }\r\n  };\r\n\r\n  getPositionBasedOnMode = (posX, posY, oriWidth) => {\r\n    if (this.align === 0) {\r\n      // posY -= Math.round(this.oriHeight / 2);\r\n      posX -= Math.round(oriWidth / 2);\r\n    } else if (this.align === 1) {\r\n      posX -= oriWidth;\r\n    }\r\n    return [posX, posY];\r\n  };\r\n\r\n  setAlignMode = mode => {\r\n    this.align = mode;\r\n  };\r\n\r\n  setType = type => {\r\n    this.type = type;\r\n  };\r\n\r\n  setLineHeight = lineHeight => {\r\n    this.lineHeight = lineHeight;\r\n  };\r\n\r\n  setFixedGlyphWidth = fixedW => {\r\n    this.fixedWidth = fixedW;\r\n    // this.fixedHeight = fixedH;\r\n  };\r\n\r\n  findRegions = id => {\r\n    for (let i = 0; i < this.regions.length; i++) {\r\n      if (this.regions[i].id === id) {\r\n        return this.regions[i];\r\n      }\r\n    }\r\n  };\r\n\r\n  draw = (batch, CharSequence = '', posX, posY, fontSize = this.baseLine) => {\r\n    if (this.type === 0) {\r\n      if (this.preDraw) {\r\n        this.beforeDrawing(posX, posY, fontSize, CharSequence);\r\n      }\r\n      for (let i = 0; i < this.cache.length; i++) {\r\n        let cache = this.cache[i];\r\n        cache.key.draw(batch, cache.x, cache.y, cache.width, cache.height);\r\n      }\r\n    }\r\n\r\n    if (this.type === 1) {\r\n      this.beforeDrawing(posX, posY, fontSize, CharSequence);\r\n      for (let i = 0; i < this.cache.length; i++) {\r\n        let cache = this.cache[i];\r\n        cache.key.draw(batch, cache.x, cache.y, cache.width, cache.height);\r\n      }\r\n      this.cache.length = 0;\r\n      this.positionBreak.length = 0;\r\n    }\r\n  };\r\n}\r\n","import { loadTexture, TextureRegion } from 'gdxjs';\r\n// import GlyphLayour from \"./glyphLayout\";\r\n// import GlyphLayour from \"./glyphLayout\";\r\nimport GlyphLayour from './glyphLayout';\r\n\r\nexport const AlignMode = {\r\n  center: 0,\r\n  right: 1,\r\n  left: 2\r\n};\r\n\r\nexport const TextType = {\r\n  static: 0,\r\n  dynamic: 1\r\n};\r\n\r\nfunction concatAndResolveUrl(url, concat) {\r\n  let url1 = url.split('/');\r\n  let url2 = concat.split('/');\r\n  let url3 = [];\r\n\r\n  for (let i = 0, l = url1.length; i < l; i++) {\r\n    if (url1[i] === '..') {\r\n      url3.pop();\r\n    } else if (url1[i] === '.') {\r\n      continue;\r\n    } else {\r\n      url3.push(url1[i]);\r\n    }\r\n  }\r\n\r\n  for (let i = 0, l = url2.length; i < l; i++) {\r\n    if (url2[i] === '..') {\r\n      url3.pop();\r\n    } else if (url2[i] === '.') {\r\n      continue;\r\n    } else {\r\n      url3.push(url2[i]);\r\n    }\r\n  }\r\n\r\n  return url3.join('/');\r\n}\r\n\r\nexport default async (gl, packFileUrl, textureOptions) => {\r\n  const packFileContent = await fetch(packFileUrl).then(res => res.text());\r\n  const pages = [];\r\n  const regionsData = [];\r\n  const kerningsData = [];\r\n  let pageImage = null;\r\n  const lines = packFileContent.split('\\n');\r\n  let i = 0;\r\n  let tuple;\r\n  let tmp_array = [];\r\n  let push_to_kerning = false;\r\n\r\n  while (true) {\r\n    let line = lines[i];\r\n    if (line === undefined) {\r\n      push_to_kerning = false;\r\n      break;\r\n    }\r\n\r\n    if (line.split(' ').length === 2) {\r\n      const tmp = line.split(' ');\r\n      if (tmp[0] === 'kernings') {\r\n        push_to_kerning = true;\r\n      }\r\n      i++;\r\n      line = lines[i];\r\n    }\r\n    if (line.trim().length === 0) {\r\n      pageImage = null;\r\n    }\r\n    if (!push_to_kerning && pageImage !== null) {\r\n      tuple = line.split(' ').map(s => s.trim());\r\n      tuple = tuple.filter(item => item !== '');\r\n      tmp_array.length = 0;\r\n\r\n      for (let i = 1; i < tuple.length; i++) {\r\n        tmp_array.push(tuple[i].split('=')[1]);\r\n      }\r\n      const id = parseInt(tmp_array[0], 10);\r\n      const left = parseInt(tmp_array[1], 10);\r\n      const top = parseInt(tmp_array[2], 10);\r\n      const width = parseInt(tmp_array[3], 10);\r\n      const height = parseInt(tmp_array[4], 10);\r\n      const xoffset = parseInt(tmp_array[5], 10);\r\n      const yoffset = parseInt(tmp_array[6], 10);\r\n      const xadvance = parseInt(tmp_array[7], 10);\r\n      const page = parseInt(tmp_array[8], 10);\r\n\r\n      const region = {\r\n        id,\r\n        left,\r\n        top,\r\n        width,\r\n        height,\r\n        xoffset,\r\n        yoffset,\r\n        xadvance,\r\n        page: pageImage,\r\n        id_page: page\r\n      };\r\n\r\n      regionsData.push(region);\r\n    }\r\n\r\n    if (push_to_kerning && pageImage !== null) {\r\n      tuple = line.split(' ').map(s => s.trim());\r\n      tuple = tuple.filter(item => item !== '');\r\n      tmp_array.length = 0;\r\n\r\n      for (let i = 1; i < tuple.length; i++) {\r\n        tmp_array.push(tuple[i].split('=')[1]);\r\n      }\r\n      const first = parseInt(tmp_array[0], 10);\r\n      const second = parseInt(tmp_array[1], 10);\r\n      const amount = parseInt(tmp_array[2], 10);\r\n      kerningsData.push({ first, second, amount });\r\n    }\r\n\r\n    if (pageImage === null) {\r\n      tuple = line.split(' ').map(s => s.trim());\r\n      for (let i = 1; i < tuple.length; i++) {\r\n        tmp_array.push(tuple[i].split('=')[1]);\r\n      }\r\n      const face = tmp_array[0];\r\n      const size = parseInt(tmp_array[1], 10);\r\n      const bold = parseInt(tmp_array[2], 10) === 0 ? false : true;\r\n      const italic = parseInt(tmp_array[3], 10) === 0 ? false : true;\r\n      const charset = tmp_array[4];\r\n      const unicode = parseInt(tmp_array[5], 10);\r\n      const stretchH = parseInt(tmp_array[6], 10); // percentage\r\n      const smooth = parseInt(tmp_array[7], 10);\r\n      const aa = parseInt(tmp_array[8], 10);\r\n      const padding = tmp_array[9].split(',').map(i => parseInt(i, 10));\r\n      const spacing = tmp_array[10].split(',').map(i => parseInt(i, 10));\r\n      const outline = parseInt(tmp_array[11], 10);\r\n\r\n      i++;\r\n      line = lines[i];\r\n      tmp_array.length = 0;\r\n      tuple = line.split(' ').map(s => s.trim());\r\n      for (let i = 1; i < tuple.length; i++) {\r\n        tmp_array.push(tuple[i].split('=')[1]);\r\n      }\r\n      const lineHeight = parseInt(tmp_array[0], 10);\r\n      const base = parseInt(tmp_array[1], 10);\r\n      const scaleW = parseInt(tmp_array[2], 10);\r\n      const scaleH = parseInt(tmp_array[3], 10);\r\n      const num_of_pages = parseInt(tmp_array[4], 10);\r\n      const packed = parseInt(tmp_array[5], 10);\r\n      const alphaChnl = parseInt(tmp_array[6], 10);\r\n      const redChnl = parseInt(tmp_array[7], 10);\r\n      const greenChnl = parseInt(tmp_array[8], 10);\r\n      const blueChnl = parseInt(tmp_array[9], 10);\r\n\r\n      i++;\r\n      line = lines[i];\r\n      tmp_array.length = 0;\r\n      tuple = line.split(' ').map(s => s.trim());\r\n      for (let i = 1; i < tuple.length; i++) {\r\n        tmp_array.push(tuple[i].split('=')[1]);\r\n      }\r\n      const page_id = parseInt(tmp_array[0], 10);\r\n      const url = tmp_array[1].split('\"');\r\n      const file = concatAndResolveUrl(packFileUrl, `../${url[1]}`);\r\n      pageImage = {\r\n        file,\r\n        page_id,\r\n        face,\r\n        size,\r\n        bold,\r\n        italic,\r\n        charset,\r\n        unicode,\r\n        stretchH,\r\n        smooth,\r\n        aa,\r\n        padding,\r\n        spacing,\r\n        outline,\r\n        lineHeight,\r\n        base,\r\n        scaleW,\r\n        scaleH,\r\n        num_of_pages,\r\n        packed,\r\n        alphaChnl,\r\n        redChnl,\r\n        greenChnl,\r\n        blueChnl\r\n      };\r\n      pages.push(pageImage);\r\n    }\r\n    i++;\r\n  }\r\n\r\n  for (let page of pages) {\r\n    page.texture = await loadTexture(gl, page.file, textureOptions);\r\n    page.invTextWidth = 1 / page.texture.width;\r\n    page.invTextHeight = 1 / page.texture.height;\r\n  }\r\n\r\n  const regions = [];\r\n\r\n  for (let regionData of regionsData) {\r\n    const left = regionData.left;\r\n    const top = regionData.top;\r\n    const width = regionData.width;\r\n    const height = regionData.height;\r\n    const { texture, invTexWidth, invTexHeight } = regionData.page;\r\n    regions.push(new TextureRegion(texture, left, top, width, height, regionData, invTexWidth, invTexHeight));\r\n  }\r\n\r\n  return {\r\n    getLineHeight() {\r\n      return pageImage.lineHeight;\r\n    },\r\n\r\n    getPages() {\r\n      return pages;\r\n    },\r\n\r\n    getRegions() {\r\n      return regions;\r\n    },\r\n\r\n    findRegions(id) {\r\n      for (let i = 0; i < regions.length; i++) {\r\n        if (regions[i].id === id) {\r\n          return regions[i];\r\n        }\r\n      }\r\n    },\r\n\r\n    setNewText(canvasWidth) {\r\n      return new GlyphLayour(pageImage, regions, kerningsData, canvasWidth);\r\n    }\r\n  };\r\n  // return { pageImage, kerningsData, regionsData };\r\n};\r\n","export const checkPointInsideRect = (point, verts, DEVICE_PIXEL_RATIO = 1) => {\n  const x = point.x * DEVICE_PIXEL_RATIO;\n  const y = point.y * DEVICE_PIXEL_RATIO;\n  const minX = Math.min(verts[0], verts[2], verts[4], verts[6]);\n  const maxX = Math.max(verts[0], verts[2], verts[4], verts[6]);\n  const minY = Math.min(verts[1], verts[3], verts[5], verts[7]);\n  const maxY = Math.max(verts[1], verts[3], verts[5], verts[7]);\n\n  if (x < minX || x > maxX || y < minY || y > maxY) return false;\n  return true;\n};\n","import createScreen from '../util/createScreen';\r\nimport { createGenderChoosingScreen } from './genderChoosingScreen';\r\nimport { createBatch, InputHandler, createOrthoCamera, fillRect } from 'gdxjs';\r\nimport { AlignMode } from '../util/loadFontFile';\r\nimport createWhiteTex from 'gl-white-texture';\r\nimport { checkPointInsideRect } from '../util/coordUtil';\r\n\r\n// const coint_list = [0, 50, 200];\r\n\r\nexport const createEndScreen = async (Game, coinCount, distance, watch) => {\r\n  const goToChoosingScreen = async () => {\r\n    Game.setCurrentScreen(await createGenderChoosingScreen(Game));\r\n  };\r\n  const { gl, width, height, canvas, font, gender, pixelRatio } = Game;\r\n  const endScreen = Game.assets.endScreen;\r\n  const { achive1, achive2, achive3, characterAtlas } = Game.assets;\r\n  const whiteTex = createWhiteTex(gl);\r\n\r\n  const inputHandler = new InputHandler(canvas);\r\n  const batch = createBatch(gl);\r\n  const camera = createOrthoCamera(width, height, width, height);\r\n  // inputHandler.addEventListener('touchStart', (x, y) => {\r\n  //   goToChoosingScreen();\r\n  // });\r\n\r\n  const retry = Game.assets.retry;\r\n  const reward = Game.assets.reward;\r\n  const buttonW = width / 2.5;\r\n  const buttonH = (buttonW * retry.height) / retry.width;\r\n\r\n  const girl = characterAtlas.findRegion('girl_running_1', 0);\r\n  const man = characterAtlas.findRegion('man_running_1', 0);\r\n  const girl_size = [width / 7, ((width / 7) * girl.height) / girl.width];\r\n  const man_size = [width / 7, ((width / 7) * man.height) / man.width];\r\n\r\n  const coin = font.setNewText(width);\r\n  const lengthHaveGone = font.setNewText(width);\r\n  const watchCount = font.setNewText(width);\r\n  const eScreenW = width;\r\n  const eScreenH = (eScreenW * endScreen.height) / endScreen.width;\r\n\r\n  const achiveW = width / 20;\r\n  const achiveH = (achiveW * achive1.height) / achive1.width;\r\n\r\n  let ratio_list = [coinCount / 50, (coinCount - 50) / 150, (coinCount - 200) / 200];\r\n  for (let index in ratio_list) {\r\n    if (ratio_list[index] > 1) {\r\n      ratio_list[index] = 1;\r\n    }\r\n  }\r\n  if (coinCount <= 50) {\r\n    ratio_list[1] = ratio_list[2] = 0;\r\n  } else if (coinCount <= 200 && coinCount > 50) {\r\n    ratio_list[2] = 0;\r\n  } else if (coinCount === 400) {\r\n    ratio_list[2] = 1;\r\n  }\r\n  const rest_ratio = [\r\n    height / 4.5 + (height / 6) * 2 + height / 90 + (height / 6) * (1 - ratio_list[0]),\r\n    height / 4.5 + height / 6 + height / 180 + (height / 6) * (1 - ratio_list[1]),\r\n    height / 4.5 + (height / 6) * (1 - ratio_list[2])\r\n  ];\r\n  let stateTime = 0;\r\n  let startCount = true;\r\n  return createScreen({\r\n    update(delta) {\r\n      // fillRect(batch, reward, (width * 0.91) / 2, height / 2, buttonW, buttonH);\r\n      // fillRect(batch, retry, (width * 0.91) / 2, height / 2 + buttonH + width / 50, buttonW, buttonH);\r\n      const link_rect = [\r\n        (width * 0.91) / 2,\r\n        height / 2,\r\n        (width * 0.91) / 2 + buttonW,\r\n        height / 2,\r\n        (width * 0.91) / 2,\r\n        height / 2 + buttonH,\r\n        (width * 0.91) / 2 + buttonW,\r\n        height / 2 + buttonH\r\n      ];\r\n\r\n      const reset_rect = [\r\n        (width * 0.91) / 2,\r\n        height / 2 + buttonH + width / 50,\r\n        (width * 0.91) / 2 + buttonW,\r\n        height / 2 + buttonH + width / 50,\r\n        (width * 0.91) / 2,\r\n        height / 2 + buttonH + width / 50 + buttonH,\r\n        (width * 0.91) / 2 + buttonW,\r\n        height / 2 + buttonH + width / 50 + buttonH\r\n      ];\r\n      if (startCount) {\r\n        stateTime += delta;\r\n      }\r\n      if (stateTime >= 1) {\r\n        stateTime = 0;\r\n        inputHandler.addEventListener('touchStart', (x, y) => {\r\n          let point = { x: x, y: y };\r\n          if (checkPointInsideRect(point, link_rect, pixelRatio)) {\r\n            startCount = false;\r\n            window.location.href = 'https://curnonwatch.com/';\r\n          }\r\n          if (checkPointInsideRect(point, reset_rect, pixelRatio)) {\r\n            startCount = false;\r\n            goToChoosingScreen();\r\n          }\r\n        });\r\n      }\r\n\r\n      camera.setPosition(0, 0);\r\n      batch.setProjection(camera.combined);\r\n      batch.begin();\r\n      batch.setColor(1, 1, 1, 1);\r\n      batch.draw(endScreen, width / 2 - eScreenW / 2, height / 2 - eScreenH / 2, eScreenW, eScreenH);\r\n      batch.draw(achive1, width / 4.1 - achiveW * 1.3, height / 4.5 + (height / 6) * 2 + height / 60 - achiveH / 2, achiveW, achiveH);\r\n      batch.draw(achive2, width / 4.1 - achiveW * 1.3, height / 4.5 + height / 6 + height / 120 - achiveH / 2, achiveW, achiveH);\r\n      batch.draw(achive3, width / 4.1 - achiveW * 1.3, height / 4.5 - achiveH / 2, achiveW, achiveH);\r\n\r\n      batch.setColor(0.87, 0.87, 0.87, 1);\r\n      batch.draw(whiteTex, width / 4.1, height / 4.5, width / 38, height / 6);\r\n      batch.draw(whiteTex, width / 4.1, height / 4.5 + height / 6 + height / 180, width / 38, height / 6);\r\n      batch.draw(whiteTex, width / 4.1, height / 4.5 + (height / 6) * 2 + height / 90, width / 38, height / 6);\r\n\r\n      batch.setColor(1, 0.5, 0, 1);\r\n      batch.draw(whiteTex, width / 4.1, rest_ratio[0], width / 38, (height / 6) * ratio_list[0]);\r\n      batch.draw(whiteTex, width / 4.1, rest_ratio[1], width / 38, (height / 6) * ratio_list[1]);\r\n      batch.draw(whiteTex, width / 4.1, rest_ratio[2], width / 38, (height / 6) * ratio_list[2]);\r\n\r\n      batch.setColor(0, 0, 0, 1);\r\n      coin.setAlignMode(AlignMode.left);\r\n      coin.draw(batch, `x${coinCount}`, (width * 1.71) / 3, height / 2.65, width / 20);\r\n      watchCount.setAlignMode(AlignMode.center);\r\n      watchCount.draw(batch, `x${watch}`, (width * 2.2) / 3, height / 3.1, width / 20);\r\n      lengthHaveGone.setAlignMode(AlignMode.center);\r\n      lengthHaveGone.draw(batch, `${Math.floor((Math.floor(distance) * -1) / 10)}m`, (width * 1.94) / 3, height / 2.24, width / 14);\r\n      batch.setColor(1, 1, 1, 1);\r\n      fillRect(batch, reward, (width * 0.91) / 2, height / 2, buttonW, buttonH);\r\n      fillRect(batch, retry, (width * 0.91) / 2, height / 2 + buttonH + width / 50, buttonW, buttonH);\r\n      // reward.draw(batch, width / 2, height / 2, buttonW, buttonH);\r\n\r\n      // batch.setColor(1, 1, 0, 1);\r\n      // // batch.draw(whiteTex, (width * 1.38) / 3, (height * 1.55) / 3, width / 2.65, height / 15);\r\n      // batch.draw(whiteTex, (width * 0.94) / 3, (height * 2.56) / 4, width / 2.65, width / 28);\r\n\r\n      // draw charactor\r\n      batch.setColor(1, 1, 1, 1);\r\n      let girlY;\r\n      let manY;\r\n      if (coinCount <= 50) {\r\n        girlY = rest_ratio[0];\r\n        manY = rest_ratio[0];\r\n      } else if (coinCount > 50 && coinCount <= 200) {\r\n        girlY = rest_ratio[1];\r\n        manY = rest_ratio[1];\r\n      } else {\r\n        girlY = rest_ratio[2];\r\n        manY = rest_ratio[2];\r\n      }\r\n\r\n      if (gender === 0) {\r\n        man.draw(batch, width / 3.6, manY - man_size[1] / 2, man_size[0], man_size[1], man_size[0] / 2, man_size[1] / 2, 0, -1, 1);\r\n      } else {\r\n        girl.draw(batch, width / 3.6, girlY - girl_size[1] / 2, girl_size[0], girl_size[1], girl_size[0] / 2, girl_size[1] / 2, 0, -1, 1);\r\n      }\r\n      batch.end();\r\n    },\r\n    destroy() {\r\n      inputHandler.cleanup();\r\n      // document.removeEventListener('keydown', goToGameScreen);\r\n    }\r\n  });\r\n};\r\n","import createScreen from '../util/createScreen';\r\nimport { TextType } from '../util/loadFontFile';\r\nimport { createBatch, createOrthoCamera } from 'gdxjs';\r\nexport const renderCoin = (Game, coinCount) => {\r\n  const { gl, width, height, font } = Game;\r\n\r\n  const coinImage = Game.assets.coin;\r\n  const coinW = width / 17;\r\n  const coinH = (coinW * coinImage.height) / coinImage.width;\r\n  const text = font.setNewText(width);\r\n\r\n  const batch = createBatch(gl);\r\n  const camera = createOrthoCamera(width, height, width, height);\r\n\r\n  return createScreen({\r\n    update(coinCount) {\r\n      camera.setPosition(0, 0);\r\n      batch.setProjection(camera.combined);\r\n      batch.begin();\r\n      batch.draw(coinImage, (width * 3.8) / 5, (height * 1) / 30, coinW, coinH);\r\n      // text.setFixedGlyphWidth(width / 10);\r\n      text.setType(TextType.dynamic);\r\n      batch.setColor(102 / 255, 51 / 255, 0, 1);\r\n      text.draw(batch, `${coinCount}`, (width * 4.15) / 5, (height * 1) / 30, width / 20);\r\n      batch.setColor(1, 1, 1, 1);\r\n      batch.end();\r\n    },\r\n    destroy() {}\r\n  });\r\n};\r\n","import { createBatch, createOrthoCamera } from 'gdxjs';\r\n\r\nexport const createBuffListRenderSystem = Game => {\r\n  const { gl, width, height, assets } = Game;\r\n  const watchAtlas = assets.watchAtlas;\r\n  const batch = createBatch(gl);\r\n  const camera = createOrthoCamera(width, height, width, height);\r\n  let watchList = [];\r\n  for (let i = 0; i < 3; i++) {\r\n    watchList.push(watchAtlas.findRegion(`watch_${i + 1}`, 0));\r\n  }\r\n  let watchSize = width / 8.5;\r\n  let tmpDistance = 0;\r\n  return {\r\n    update(buffs) {\r\n      camera.setPosition(0, 0);\r\n      batch.setProjection(camera.combined);\r\n      batch.begin();\r\n      batch.setColor(1, 1, 1, 1);\r\n      for (let i = 0; i < buffs.length; i++) {\r\n        if (buffs[i].state === 'zoomout') {\r\n          buffs[i].scale -= 0.1;\r\n          if (buffs[i].scale <= 0) {\r\n            buffs[i].state = 'visible';\r\n          }\r\n        }\r\n        if (buffs[i].state === 'enable' || buffs[i].state === 'zoomout') {\r\n          watchList[buffs[i].type].draw(\r\n            batch,\r\n            width / 8 + tmpDistance - watchSize / 2,\r\n            height / 18 - watchSize / 2,\r\n            watchSize,\r\n            watchSize,\r\n            watchSize / 2,\r\n            watchSize / 2,\r\n            0,\r\n            buffs[i].scale,\r\n            buffs[i].scale\r\n          );\r\n        }\r\n        if (buffs[i].state === 'visible') {\r\n          buffs.splice(i, 1);\r\n        }\r\n        tmpDistance += watchSize;\r\n      }\r\n      tmpDistance = 0;\r\n      batch.end();\r\n    }\r\n  };\r\n};\r\n","import { fillRect } from 'gdxjs';\r\n\r\nexport const specialButton = (batch, whiteTex, width, height, assets) => {\r\n  const button = assets.button;\r\n  const buttonR = width / 3.8;\r\n  batch.setColor(1, 1, 1, 1);\r\n  fillRect(batch, button, width / 2 - buttonR / 2, (height * 4.7) / 6, buttonR, buttonR);\r\n};\r\n","import createScreen from '../util/createScreen';\nimport { InputHandler, createBatch, createOrthoCamera } from 'gdxjs';\nimport createWhiteTex from 'gl-white-texture';\nimport { createDeadlineRenderSystem } from './system/DeadlineRenderSystem';\nimport { createBgRenderSystem } from './system/BgRenderSystem';\nimport { createParticleSystem } from './system/ParticleSystem';\nimport { createWallSystem } from './system/WallSystem';\nimport { createWallRenderSystem } from './system/WallRenderSystem';\nimport { createPlayerRenderSystem } from './system/PlayerRenderSystem';\nimport { createObstacleSystem } from './system/ObstacleSystem';\nimport { createObstacleRenderSystem } from './system/ObstacleRenderSystem';\nimport { createDebuffRenderSystem } from './system/DebuffRenderSystem';\nimport { createWatchSystem } from './system/WatchSystem';\nimport { createWatchRenderSystem } from './system/WatchRenderSystem';\nimport { createEndScreen } from './genderEndScreen';\nimport { renderCoin } from './coinRenderSystem';\nimport { createBuffListRenderSystem } from './system/BuffListRenderSystem';\nimport { checkPointInsideRect } from '../util/coordUtil';\n\n// import { specialButton } from './system/specialRenderSystem';\nimport { specialButton } from './specialRenderSystem';\nexport const createTestScreen = async Game => {\n  const { gender, gl, width, height, canvas, assets, pixelRatio } = Game;\n  let outfit = 0;\n\n  const batch = createBatch(gl);\n  const camera = createOrthoCamera(width, height, width, height);\n  const whiteTex = createWhiteTex(gl);\n  let inputHandler = new InputHandler(canvas);\n  const { bg1, bg2, deadLineAtlas, characterAtlas, slashAtlas, obstacleAtlas, noteTex, watchAtlas } = assets;\n\n  const BG_WIDTH = width;\n  const BG1_HEIGHT = (BG_WIDTH / bg1.width) * bg1.height;\n\n  const WALL_THICKNESS = width * 0.05;\n  const WALL_LENGTH = BG1_HEIGHT / 7;\n  const JUMP_SPEED_X = width * 2;\n  const NORMAL_SPEED_Y = -height * 0.75;\n  const PLAYER_SIZE = width / 5;\n  const INITIAL_GAP = height * 0.5;\n\n  let buffTime = 0;\n  let specialTime = 0;\n  let coinCount = 0;\n  let watchCount = 0;\n  const hasBuff = () => buffTime >= stateTime;\n  const hasSpecial = () => specialTime >= stateTime;\n  let x = WALL_THICKNESS;\n  let y = 0;\n  let speedX = 0;\n  let speedY = NORMAL_SPEED_Y;\n  let targetGap = INITIAL_GAP;\n  let gap = INITIAL_GAP;\n  let flipped = false;\n  let jumping = false;\n  const minX = WALL_THICKNESS;\n  const maxX = width - WALL_THICKNESS - PLAYER_SIZE;\n  let jumpStart = 0;\n\n  const wallStarts = [];\n  const debuffs = [];\n  const buffs = [];\n\n  const checkTouch = (x, y) => {\n    let useSpecial = false;\n    if (buffs.length === 3 && buffs[0].state === 'enable') {\n      const buttonR = width / 3.8;\n      const button_rect = [\n        width / 2 - buttonR / 2,\n        (height * 4.7) / 6,\n        width / 2 - buttonR / 2 + buttonR,\n        (height * 4.7) / 6,\n        width / 2 - buttonR / 2,\n        (height * 4.7) / 6 + buttonR,\n        width / 2 - buttonR / 2 + buttonR,\n        (height * 4.7) / 6 + buttonR\n      ];\n      let point = { x: x, y: y };\n      if (checkPointInsideRect(point, button_rect, pixelRatio)) {\n        specialTime = stateTime + 2.5;\n        targetGap = targetGap + (INITIAL_GAP - targetGap) * 0.5;\n        for (let buff of buffs) {\n          buff.state = 'zoomout';\n        }\n        useSpecial = true;\n      }\n    }\n    !useSpecial && jump();\n  };\n\n  const jump = () => {\n    if (jumping || debuffs.length > 0) {\n      return;\n    }\n    speedX = flipped ? -JUMP_SPEED_X : JUMP_SPEED_X;\n    jumping = true;\n    jumpStart = stateTime;\n  };\n\n  inputHandler.addEventListener('touchStart', checkTouch);\n  document.addEventListener('keydown', jump);\n\n  const checkLanding = newX => {\n    if (!jumping) {\n      return;\n    }\n    let landing = false;\n    //\n    if (newX > maxX) {\n      x = maxX;\n      landing = true;\n    }\n\n    if (newX < minX) {\n      x = minX;\n      landing = true;\n    }\n\n    if (landing) {\n      speedX = 0;\n      jumping = false;\n      flipped = !flipped;\n    }\n    return landing;\n  };\n\n  const processPlayerPos = delta => {\n    let modifier = 1;\n    if (debuffs.length > 0) {\n      modifier = 0.5;\n    }\n    if (hasSpecial()) {\n      modifier *= 1.5;\n    }\n    y += speedY * delta * modifier;\n    const deltaX = speedX * delta;\n    if (!checkLanding(x + deltaX)) {\n      x += deltaX;\n    }\n  };\n\n  const processWatchCollsion = delta => {\n    const pL = x;\n    const pR = x + PLAYER_SIZE;\n    const pT = y;\n    const pB = y + PLAYER_SIZE;\n\n    for (let watch of watches) {\n      if (watch.hit) continue;\n\n      const oL = watch.x - watch.width / 2;\n      const oR = watch.x + watch.width / 2;\n      const oT = watch.y - watch.height / 2;\n      const oB = watch.y + watch.height / 2;\n      if (pL < oR && pR > oL && pT < oB && pB > oT) {\n        watchCount += 1;\n        watch.hit = true;\n        if (buffs.length <= 2) {\n          buffs.push({ type: watch.type, stateTime: 0, state: 'enable', scale: 1 });\n        }\n        watch.hitTime = stateTime;\n      }\n    }\n  };\n\n  const processObstacleCollision = delta => {\n    const pL = x;\n    const pR = x + PLAYER_SIZE;\n    const pT = y;\n    const pB = y + PLAYER_SIZE;\n\n    let hitted = false;\n\n    for (let obstacle of obstacles) {\n      if (obstacle.hit) continue;\n      const oWidth = obstacle.width;\n      const oHeight = obstacle.height;\n      const oL = obstacle.x;\n      const oR = obstacle.x + oWidth;\n      const oT = obstacle.y;\n      const oB = obstacle.y + oHeight;\n\n      if (pL < oR && pR > oL && pT < oB && pB > oT && !jumping) {\n        obstacle.hit = true;\n        if (buffs.length > 0) {\n          buffTime = stateTime + 0.2;\n          // targetGap = targetGap + (INITIAL_GAP - targetGap) * 0.5;\n          buffs[0].state = 'zoomout';\n          // buffs.shift();\n        }\n        if (!hasBuff() && !hasSpecial()) {\n          hitted = true;\n          debuffs.push({\n            time: stateTime,\n            duration: 1,\n            type: obstacle.type,\n            x: width / 2 + ((Math.random() - 0.5) * width) / 20,\n            offsetY: -((Math.random() * width) / 20 + width / 40),\n            flipped: flipped\n          });\n        }\n      }\n    }\n\n    for (let obstacle of obstacles) {\n      if (!obstacle.fired || obstacle.projectileHit) continue;\n      const pos = obstacle.projectilePos;\n      const size = obstacle.projectileSize;\n\n      const oL = pos.x - size / 3;\n      const oR = pos.x + size / 3;\n      const oT = pos.y - size / 3;\n      const oB = pos.y + size / 3;\n\n      if (pL < oR && pR > oL && pT < oB && pB > oT) {\n        obstacle.projectileHit = true;\n        obstacle.projectileHitTime = stateTime;\n        obstacle.projectileVel.set(0, speedY);\n        if (!jumping && !hasBuff() && !hasSpecial() && buffs.length === 0) {\n          debuffs.push({\n            time: stateTime,\n            duration: 1,\n            type: obstacle.type,\n            x: width / 2 + ((Math.random() - 0.5) * width) / 10,\n            offsetY: -((Math.random() * width) / 10 + width / 20),\n            flipped: flipped\n          });\n          obstacle.projectileVel.set(0, speedY / 2);\n          hitted = true;\n        } else {\n          if (buffs.length > 0 && !jumping) {\n            buffTime = stateTime + 0.2;\n            buffs[0].state = 'zoomout';\n          }\n          targetGap = targetGap + (INITIAL_GAP - height) * 0.1;\n          targetGap = Math.max(targetGap, INITIAL_GAP);\n          coinCount += 5;\n        }\n      }\n    }\n    if (hitted) {\n      targetGap = targetGap + (height - INITIAL_GAP) * 0.2;\n      const rate = deadlineRenderSystem.getDeadLineParticleRate();\n      deadlineRenderSystem.setDeadLineParticleRate(rate + (MAXIMUM_DEADLINE_RATE - rate) * 0.2);\n    }\n  };\n\n  let transitionTime = -2;\n\n  const OUTFIT_COIN_REQUIRED = [0, 50, 200];\n  const SPEED_MODIFIERS = [1, 1.25, 1.5];\n\n  const processOutfit = () => {\n    for (let i = 0; i < OUTFIT_COIN_REQUIRED.length; i++) {\n      if (outfit >= i) {\n        continue;\n      }\n      if (coinCount > OUTFIT_COIN_REQUIRED[i]) {\n        outfit = i;\n        transitionTime = stateTime;\n        speedY = NORMAL_SPEED_Y * SPEED_MODIFIERS[i];\n      }\n    }\n  };\n\n  const MAXIMUM_DEADLINE_RATE = 0.015;\n  const obstacles = [];\n  const watches = [];\n\n  const PROJECTILE_SPEED = width;\n  const PROJECTILE_SIZE = width / 7.5;\n\n  const deadlineRenderSystem = createDeadlineRenderSystem(width, height, deadLineAtlas, batch);\n  const bgRenderSystem = createBgRenderSystem(width, height, bg1, bg2, batch);\n  const particleSystem = createParticleSystem(width, height, noteTex, batch, PLAYER_SIZE);\n  const wallSystem = createWallSystem(width, height, wallStarts, obstacles, WALL_LENGTH, WALL_THICKNESS);\n  const wallRenderSystem = createWallRenderSystem(width, height, whiteTex, batch, wallStarts, WALL_LENGTH, WALL_THICKNESS);\n  const playerRenderSystem = createPlayerRenderSystem(width, height, batch, characterAtlas, slashAtlas, obstacleAtlas, watchAtlas, PLAYER_SIZE, gender, outfit);\n  const obstacleSystem = createObstacleSystem(width, height, obstacles, WALL_LENGTH, WALL_THICKNESS, PROJECTILE_SPEED, PROJECTILE_SIZE);\n  const obstacleRenderSystem = createObstacleRenderSystem(whiteTex, batch, obstacles, obstacleAtlas);\n  const debuffRenderSystem = createDebuffRenderSystem(width, height, whiteTex, batch, debuffs, obstacleAtlas, gender, outfit);\n  const watchSystem = createWatchSystem(width, height, watches, outfit);\n  const watchRenderSystem = createWatchRenderSystem(width, height, batch, watchAtlas, watches, PLAYER_SIZE);\n  const CoinRender = renderCoin(Game, coinCount);\n  const buffRender = createBuffListRenderSystem(Game);\n\n  let stateTime = 0;\n\n  const check_lost = () => {\n    if (gap >= height * 0.96) {\n      return true;\n    }\n    return false;\n  };\n\n  const update = async delta => {\n    if (!check_lost()) {\n      if (hasBuff() || hasSpecial()) {\n        debuffs.length = 0;\n      }\n      gap = gap + (targetGap - gap) * 0.02;\n      for (let i = debuffs.length - 1; i >= 0; i--) {\n        if (stateTime - debuffs[i].time >= debuffs[i].duration) {\n          debuffs.splice(i, 1);\n        }\n      }\n      stateTime += delta;\n      particleSystem.update(delta, x, y, speedY);\n      processPlayerPos(delta);\n      processObstacleCollision(delta);\n      processWatchCollsion(delta);\n      processOutfit();\n      obstacleSystem.update(delta, y, stateTime);\n      wallSystem.update(delta, y, gap);\n      watchSystem.update(delta, stateTime, y, outfit);\n\n      camera.setPosition(0, 0);\n      batch.setProjection(camera.combined);\n      batch.begin();\n      bgRenderSystem.update(delta, y, gap);\n      deadlineRenderSystem.update(delta, stateTime);\n      if (buffs.length === 3) {\n        specialButton(batch, whiteTex, width, height, assets);\n      }\n      batch.end();\n\n      buffRender.update(buffs);\n      CoinRender.update(coinCount);\n\n      camera.setPosition(0, y - gap);\n      batch.setProjection(camera.combined);\n      batch.begin();\n\n      particleSystem.draw();\n      playerRenderSystem.draw(x, y, flipped, jumping, stateTime, jumpStart, buffTime, outfit, transitionTime, specialTime);\n      watchRenderSystem.draw(stateTime, x, y);\n      wallRenderSystem.draw();\n      obstacleRenderSystem.draw(stateTime);\n      debuffRenderSystem.draw(stateTime, y);\n\n      batch.end();\n    } else {\n      Game.setCurrentScreen(await createEndScreen(Game, coinCount, y, watchCount));\n    }\n  };\n\n  return createScreen({\n    update,\n    destroy() {\n      inputHandler.cleanup();\n      document.removeEventListener('keydown', jump);\n    }\n  });\n};\n","import createScreen from '../util/createScreen';\r\nimport { createTestScreen } from './testScreen';\r\nimport { AlignMode } from '../util/loadFontFile';\r\nimport { createBatch, InputHandler, createOrthoCamera } from 'gdxjs';\r\n// import createWhiteTex from 'gl-white-texture';\r\nexport const createInstructionScreen = async Game => {\r\n  const goToGameScreen = async () => {\r\n    Game.setCurrentScreen(await createTestScreen(Game));\r\n  };\r\n  // document.addEventListener('keydown', goToGameScreen);\r\n\r\n  const { gl, width, height, canvas, font } = Game;\r\n  const inputHandler = new InputHandler(canvas);\r\n  const instruction = Game.assets.instruction;\r\n  const instrucW = width;\r\n  const instrucH = (instrucW * instruction.height) / instruction.width;\r\n  const batch = createBatch(gl);\r\n  const camera = createOrthoCamera(width, height, width, height);\r\n  // const whiteTex = createWhiteTex(gl);\r\n\r\n  const text1 = font.setNewText(width);\r\n  const text2 = font.setNewText(width);\r\n  const text3 = font.setNewText(width);\r\n  const fontsize = width / 30;\r\n  // inputHandler.addEventListener('touchStart', (x, y) => {\r\n  //   goToGameScreen();\r\n  // });\r\n\r\n  let stateTime = 0;\r\n  let startCount = true;\r\n  return createScreen({\r\n    update(delta) {\r\n      if (startCount) {\r\n        stateTime += delta;\r\n      }\r\n      if (stateTime >= 1) {\r\n        stateTime = 0;\r\n        inputHandler.addEventListener('touchStart', (x, y) => {\r\n          startCount = false;\r\n          goToGameScreen();\r\n        });\r\n      }\r\n      camera.setPosition(0, 0);\r\n      batch.setProjection(camera.combined);\r\n      batch.begin();\r\n      batch.setColor(1, 1, 1, 1);\r\n      batch.draw(instruction, width / 2 - instrucW / 2, height / 2 - instrucH / 2, instrucW, instrucH);\r\n\r\n      text1.setFixedGlyphWidth(width / 3);\r\n      text1.draw(batch, 'NHẤN VÀO MÀN HÌNH ĐỂ NHẢY', (width * 2) / 3, height / 7, fontsize);\r\n\r\n      text2.setAlignMode(AlignMode.right);\r\n      text2.setFixedGlyphWidth(width / 2.7);\r\n      text2.draw(batch, 'CHÉM NHỮNG VẬT TRÊN KHÔNG CÓ THỂ THU ĐƯỢC MỘT LƯỢNG VÀNG', width / 2.6, height / 2.6, fontsize);\r\n\r\n      text3.setFixedGlyphWidth(width / 3);\r\n      text3.draw(batch, 'THU THẬP ĐỦ SỐ LƯỢNG ĐỒNG HỒ SẼ GIÚP BẠN SỬ DỤNG KỸ NĂNG ĐẶC BIỆT', (width * 1.9) / 3, (height * 2.8) / 4, fontsize);\r\n      batch.end();\r\n    },\r\n    destroy() {\r\n      inputHandler.cleanup();\r\n      // document.removeEventListener('keydown', goToGameScreen);\r\n    }\r\n  });\r\n};\r\n","import createScreen from '../util/createScreen';\nimport { createInstructionScreen } from './genderInstructionScreen';\nimport { InputHandler, createBatch, createOrthoCamera, fillRect } from 'gdxjs';\nimport { checkPointInsideRect } from '../util/coordUtil';\nimport { AlignMode, TextType } from '../util/loadFontFile';\nimport createWhiteTexture from 'gl-white-texture';\n\nexport const createGenderChoosingScreen = Game => {\n  const goToInstructionScreen = async () => Game.setCurrentScreen(await createInstructionScreen(Game));\n  // document.addEventListener('keydown', goToInstructionScreen);\n\n  const { gl, width, height, assets, canvas, title, pixelRatio } = Game;\n  const newText = title.setNewText(width);\n\n  const batch = createBatch(gl);\n  const camera = createOrthoCamera(width, height, width, height);\n  const inputHandler = new InputHandler(canvas);\n\n  const whiteTex = createWhiteTexture(gl);\n\n  const { woman, man, tray, bg2, bg1 } = assets;\n  const BG_WIDTH = width;\n  const BG_HEIGHT = (BG_WIDTH / bg1.width) * bg1.height;\n  const BG2_HEIGHT = (BG_WIDTH / bg2.width) * bg2.height;\n  const HUMAN_HEIGHT = height / 4;\n  const WOMAN_WIDTH = (HUMAN_HEIGHT * woman.width) / woman.height;\n  const MAN_WIDTH = (HUMAN_HEIGHT * man.width) / man.height;\n  const TRAY_WIDTH = width / 4;\n  const TRAY_HEIGHT = (TRAY_WIDTH * tray.height) / tray.width;\n\n  const trayX = width / 2 - TRAY_WIDTH / 2;\n  const trayY = (height * 2.2) / 3;\n\n  const man_rect = [\n    trayX - width / 5 + MAN_WIDTH / 2,\n    (height * 1.46) / 3,\n    trayX - width / 5 + TRAY_WIDTH / 2 + MAN_WIDTH,\n    (height * 1.46) / 3,\n    trayX - width / 5 + TRAY_WIDTH / 2,\n    (height * 1.46) / 3 + HUMAN_HEIGHT,\n    trayX - width / 5 + TRAY_WIDTH / 2 + MAN_WIDTH,\n    (height * 1.46) / 3 + HUMAN_HEIGHT\n  ];\n  const woman_rect = [\n    trayX + width / 5 + TRAY_WIDTH / 2 - WOMAN_WIDTH / 2,\n    (height * 1.46) / 3,\n    trayX + width / 5 + TRAY_WIDTH / 2 - WOMAN_WIDTH / 2 + WOMAN_WIDTH,\n    (height * 1.46) / 3,\n    trayX + width / 5 + TRAY_WIDTH / 2 - WOMAN_WIDTH / 2,\n    (height * 1.46) / 3 + HUMAN_HEIGHT,\n    trayX + width / 5 + TRAY_WIDTH / 2 - WOMAN_WIDTH / 2 + WOMAN_WIDTH,\n    (height * 1.46) / 3 + HUMAN_HEIGHT\n  ];\n  let point;\n  inputHandler.addEventListener('touchStart', (x, y) => {\n    point = { x: x, y: y };\n    if (checkPointInsideRect(point, man_rect, pixelRatio)) {\n      Game.gender = 0;\n      goToInstructionScreen();\n    }\n    if (checkPointInsideRect(point, woman_rect, pixelRatio)) {\n      Game.gender = 1;\n      goToInstructionScreen();\n    }\n  });\n\n  return createScreen({\n    update(delta) {\n      camera.setPosition(0, 0);\n      batch.setProjection(camera.combined);\n      batch.begin();\n\n      batch.draw(bg2, 0, 0, BG_WIDTH, BG2_HEIGHT);\n      batch.draw(bg1, 0, 0, BG_WIDTH, BG_HEIGHT);\n      batch.setColor(1, 1, 1, 0.5);\n      fillRect(batch, whiteTex, 0, 0, width, height);\n      batch.setColor(1, 1, 1, 1);\n      newText.setAlignMode(AlignMode.center);\n      newText.setType(TextType.dynamic);\n      newText.setFixedGlyphWidth(width);\n      // batch.setColor(0, 51 / 255, 102 / 255, 1);\n      batch.setColor(0, 0, 0, 1);\n      newText.draw(batch, 'CHỌN NHÂN VẬT', width / 2, trayY - width / 8 - HUMAN_HEIGHT, width / 20);\n\n      batch.setColor(1, 1, 1, 1);\n      batch.draw(man, trayX - width / 5 + MAN_WIDTH / 2, (height * 1.46) / 3, MAN_WIDTH, HUMAN_HEIGHT);\n      batch.draw(woman, trayX + width / 5 + TRAY_WIDTH / 2 - WOMAN_WIDTH / 2, (height * 1.46) / 3, WOMAN_WIDTH, HUMAN_HEIGHT);\n      batch.draw(tray, trayX - width / 5, trayY, TRAY_WIDTH, TRAY_HEIGHT);\n      batch.draw(tray, trayX + width / 5, trayY, TRAY_WIDTH, TRAY_HEIGHT);\n      batch.end();\n    },\n    destroy() {\n      inputHandler.cleanup();\n    }\n  });\n};\n","import './index.css';\n\nimport { resizeCanvas, createGameLoop, loadTexture, loadAtlas } from 'gdxjs';\nimport { createGenderChoosingScreen } from './screen/genderChoosingScreen';\nimport loadFontFile from './util/loadFontFile';\nconst init = async () => {\n  const canvas = document.getElementById('main');\n  const loading = document.getElementById('loading');\n  const [width, height] = resizeCanvas(canvas, 2);\n  const gl = canvas.getContext('webgl');\n  // const font = await loadFontFile(gl, './arial-32px.fnt');\n  const font = await loadFontFile(gl, './myriad.fnt');\n  const title = await loadFontFile(gl, './tittle.fnt');\n\n  const Game = {\n    title,\n    font,\n    width,\n    height,\n    canvas,\n    gl,\n    pixelRatio: 2,\n    setCurrentScreen(screen) {\n      if (Game.currentScreen) {\n        Game.currentScreen.destroy();\n      }\n      Game.currentScreen = screen;\n    }\n  };\n\n  let count = 0;\n  loading.innerHTML = `Loading (${count} / 7)...`;\n  const doAndCount = promise =>\n    promise.then(result => {\n      count++;\n      loading.innerHTML = `Loading (${count} / 20)...`;\n      return result;\n    });\n\n  const [\n    bg1,\n    bg2,\n    deadLineAtlas,\n    characterAtlas,\n    slashAtlas,\n    obstacleAtlas,\n    noteTex,\n    watchAtlas,\n    man,\n    woman,\n    tray,\n    endScreen,\n    achive1,\n    achive2,\n    achive3,\n    manjump,\n    instruction,\n    coin,\n    button,\n    retry,\n    reward\n  ] = await Promise.all([\n    doAndCount(loadTexture(gl, './test-bg.png')),\n    doAndCount(loadTexture(gl, './test-bg2.jpg')),\n    doAndCount(loadAtlas(gl, './deadline.atlas')),\n    doAndCount(loadAtlas(gl, './test.atlas')),\n    doAndCount(loadAtlas(gl, './slash.atlas')),\n    doAndCount(loadAtlas(gl, './obstacle.atlas')),\n    doAndCount(loadTexture(gl, './note.png')),\n    doAndCount(loadAtlas(gl, './watch.atlas')),\n    doAndCount(loadTexture(gl, './man.png')),\n    doAndCount(loadTexture(gl, './woman.png')),\n    doAndCount(loadTexture(gl, './tray.png')),\n    doAndCount(loadTexture(gl, './end-screen.jpg')),\n    doAndCount(loadTexture(gl, './archivement_1.png')),\n    doAndCount(loadTexture(gl, './archivement_2.png')),\n    doAndCount(loadTexture(gl, './archivement_3.png')),\n    doAndCount(loadTexture(gl, './man jump.png')),\n    doAndCount(loadTexture(gl, './instruction.png')),\n    doAndCount(loadTexture(gl, './coin.png')),\n    doAndCount(loadTexture(gl, './button.png')),\n    doAndCount(loadTexture(gl, './retry-btn.png')),\n    doAndCount(loadTexture(gl, './reward-btn.png'))\n  ]);\n  const assets = {\n    bg1,\n    bg2,\n    deadLineAtlas,\n    characterAtlas,\n    slashAtlas,\n    obstacleAtlas,\n    noteTex,\n    watchAtlas,\n    man,\n    woman,\n    tray,\n    endScreen,\n    achive1,\n    achive2,\n    achive3,\n    manjump,\n    instruction,\n    coin,\n    button,\n    retry,\n    reward\n  };\n  Game.assets = assets;\n\n  Game.setCurrentScreen(await createGenderChoosingScreen(Game));\n  loading.style.display = 'none';\n\n  gl.clearColor(1, 1, 1, 1);\n  const update = delta => {\n    gl.clear(gl.COLOR_BUFFER_BIT);\n    if (Game.currentScreen) {\n      Game.currentScreen.update(delta);\n    }\n  };\n\n  createGameLoop(update);\n};\n\ninit();\n"],"sourceRoot":""}