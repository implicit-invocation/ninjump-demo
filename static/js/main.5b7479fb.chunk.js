(this["webpackJsonpcurnon-ninjump"]=this["webpackJsonpcurnon-ninjump"]||[]).push([[0],{29:function(e,t,n){e.exports=n(58)},31:function(e,t,n){},58:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),o=n(5),c=n(2),i=(n(31),n(0)),u=(n(10),n(4)),s=function(){},f=function(e){var t=e.update,n=void 0===t?s:t,r=e.destroy;return{update:n,destroy:void 0===r?s:r}},l=n(3),d=n(8),h=n.n(d),v=[],b=function(e,t,n){v.length=0;for(var r=n;r>e;)r-=t;for(;r<-t;)r+=t;var a=r;do{v.push(r),r+=t}while(r<e);for(r=a;r>0;)r-=t,v.push(r);return v},p=["bed","bath","tv"],j=function(){var e=Object(c.a)(a.a.mark((function e(t){var n,r,o,c,s,d,v,j,O,m,g,y,w,M,C,x,R,F,_,L,S,k,E,T,P,B,I,K,W,Y,A,J,N,H,U,q,z,D,G,Q,V,X,Z,$,ee,te,ne,re,ae,oe,ce,ie,ue,se,fe,le,de,he,ve,be,pe,je,Oe,me,ge,ye,we,Me,Ce,xe,Re,Fe,_e,Le,Se,ke,Ee;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.gender,r=void 0===n?0:n,o=t.outfit,c=void 0===o?0:o,s=t.gl,d=t.width,v=t.height,j=t.canvas,e.next=3,Object(i.i)(s,"./curnon-ninjump.atlas");case 3:return O=e.sent,e.next=6,Object(i.i)(s,"./ui.atlas");case 6:return m=e.sent,e.next=9,Object(i.j)(s,"./bg1.png");case 9:return g=e.sent,e.next=12,Object(i.j)(s,"./bg2.jpg");case 12:y=e.sent,w=m.findRegion("deadline"),M="ob_".concat(0===r?"man":"girl"),C=["".concat(M,"_2"),"".concat(M,"_3"),"".concat(M,"_1")],x=[],R=Object(u.a)(p);try{for(R.s();!(F=R.n()).done;)_=F.value,L=O.findRegions(_),x.push(Object(i.c)(.2,L))}catch(a){R.e(a)}finally{R.f()}for(S=[],k=0,E=C;k<E.length;k++)T=E[k],P=O.findRegions(T),S.push(Object(i.c)(.05,P));return B=.05*d,I=d,.3,K=d/5,W="".concat(0===r?"man":"girl","_run_").concat(c+1),Y="".concat(0===r?"man":"girl","_jump_").concat(c+1),A=O.findRegions(W),J=O.findRegions(Y),N=Object(i.c)(.13,A),H=Object(i.c)(.05,J),U=Object(i.f)(d,v,d,v),q=Object(i.d)(s),z=h()(s),D=new i.a(j),V=d,X=d/5,1,$=G=v/5,ee=Q=v/1.5,te={},ne=-I,re=!1,ae=0,oe=!1,ce=Z=B,ie=0,ue=function(){oe||(ae=re?1.5*-V:1.5*V,oe=!0,ie=ke,ce=Z)},D.addEventListener("touchStart",ue),document.addEventListener("keydown",ue),se={},fe=function(){var e=$-G;for(var t in te)(t=parseFloat(t))+I<e&&(delete te[t],delete se[t]);for(;ne<e+v;){var n=!1,r=0;for((ne+=I)>v&&(n=Math.random()<.3,r=.5),te[ne]=n,se[ne]=[];r>0;){if(Math.random()<r){var a=Math.random()*(I-K)+ne,o=n?4:2,c=Math.floor(Math.random()*o),i=Math.floor(3*Math.random());se[ne].push({obstacleY:a,obstacleWall:c,obstacleType:i})}r-=.3}}},le=function(){for(var e in q.setColor(0,0,0,.7),te){e=parseFloat(e);var t=v-(e-$+de)-I;Object(i.h)(q,z,0,t,B,I),Object(i.h)(q,z,d-B,t,B,I),te[e]&&(Object(i.h)(q,z,d/2-B/2,t,B,I),q.setColor(0,0,0,.3),Object(i.h)(q,z,d/2-B/2+B/4,t+B/4,B,I),q.setColor(0,0,0,.7))}q.setColor(1,1,1,1)},de=G,he=0,ve=function(){var e=re?Z-X:Z,t=v-(de+=.1*(G-de))-X/2;he=t;var n=X/2,r=re?1:-1;oe?(e=re?Z:Z-X,be?e=re?Math.min(e,d/2-B/2-X):Math.max(e,d/2+B/2):(e=Math.max(e,B),e=Math.min(e,d-B-X)),H.getKeyFrame(ke-ie,l.a.NORMAL).draw(q,e,t,150*X/115,X,n,0,0,r,1)):N.getKeyFrame(ke,l.a.LOOP).draw(q,e,t,X,X,n,0,0,r,1)},be=!1,pe=function(e,t){if(!oe&&!je)return!1;var n=I*Math.floor($/I),r=te[n],a=!1,o=!1,c=Math.abs(e-ce);return r&&!be&&c<d/2-B&&(!re&&t>=d/2-B/2&&(Z=d/2-B/2,a=!0,o=!0),re&&t<=d/2+B/2&&(Z=d/2+B/2,a=!0,o=!0)),t<=B&&(Z=B,a=!0),t>=d-B&&(Z=d-B,a=!0),a&&(oe=!1,ae=0,re=!re,je=!1,be=!!o),a},je=!1,Oe=function(){if(be&&!oe){var e=I*Math.floor($/I);te[e]||(oe=!0,ae=(re=!re)?-V:V,be=!1,je=!0)}},me=d,ge=g.height*me/g.width,ye=y.height*me/y.width,we=function(){var e,t=b(v,ye,.5*$),n=Object(u.a)(t);try{for(n.s();!(e=n.n()).done;){var r=e.value;q.draw(y,0,r,me,ye)}}catch(a){n.e(a)}finally{n.f()}var o,c=b(v,ge,$),i=Object(u.a)(c);try{for(i.s();!(o=i.n()).done;){var s=o.value;q.draw(g,0,s,me,ge)}}catch(a){i.e(a)}finally{i.f()}},Me=function(){for(var e in se){var t,n=se[e],r=Object(u.a)(n);try{for(r.s();!(t=r.n()).done;){var o=t.value,c=o.obstacleY,s=o.obstacleWall,f=o.obstacleType,h=o.hit,b=o.hitTime,p=void 0;p=0===s?B-.1*K:1===s?d-B-K+.1*K:2===s?d/2-B/2-K+.1*K:d/2+B/2-.1*K;var j=v-(c-$+de)-K,O=1===s||3===s;if(h){S[f].getKeyFrame(ke-b,l.a.NORMAL).draw(q,p+O?2*K:0,he-2*K,K,K,K/2,K/2,0,O?3:-3,3)}else{var m=x[f];q.setColor(0,0,0,.3),Object(i.h)(q,z,p+K/20,j+.9*K+K/20,K,K/10),q.setColor(0,0,0,.7),Object(i.h)(q,z,p,j+.9*K,K,K/10),q.setColor(1,1,1,1),m.getKeyFrame(ke,l.a.LOOP).draw(q,p,j,K,K,K/2,K/2,0)}}}catch(a){r.e(a)}finally{r.f()}}},Ce=0,xe=function(){var e;if(!oe)for(var t in e=Z===B?0:Z===d-B?1:Z===d/2-B/2?2:3,se){var n,r=se[t],o=Object(u.a)(r);try{for(o.s();!(n=o.n()).done;){var c=n.value,i=c.obstacleWall,s=c.obstacleY;!c.hit&&i===e&&$>=s&&$<=s+K&&(c.hit=!0,c.hitTime=ke,Ce=ke+1,ee=Q/2,G*=.75,Se*=1.5)}}catch(a){o.e(a)}finally{o.f()}}},Fe=(Re=d)/w.width*w.height,_e=v-Fe,Le=1,Se=-.3,ke=0,Ee=function(e){ke+=e,q.setProjection(U.combined),q.begin(),ke>=Ce&&(ee=Q),$+=ee*e,pe(Z,Z+ae*e)||(Z+=ae*e),Oe(),fe(),xe(),we(),le(),Me(),ve(),(Le+=Se*e)<0?(Le=0,Se=-Se):Le>1&&(Le=1,Se=-Se),q.setColor(1,1,1,Le),w.draw(q,0,_e,Re,Fe),q.setColor(1,1,1,1),q.end()},e.abrupt("return",f({update:Ee,destroy:function(){D.cleanup(),document.removeEventListener("keydown",ue)}}));case 78:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();(function(){var e=Object(c.a)(a.a.mark((function e(){var t,n,r,c,u,s,f,l,d,h;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=document.getElementById("main"),n=document.getElementById("info"),r=Object(i.k)(t),c=Object(o.a)(r,2),u=c[0],s=c[1],f=t.getContext("webgl"),l={width:u,height:s,canvas:t,gl:f,pixelRatio:window.devicePixelRatio||1,setCurrentScreen:function(e){l.currentScreen&&l.currentScreen.destroy(),l.currentScreen=e}},e.t0=l,e.next=8,j(l);case 8:e.t1=e.sent,e.t0.setCurrentScreen.call(e.t0,e.t1),f.clearColor(1,1,1,1),d=function(e){f.clear(f.COLOR_BUFFER_BIT),l.currentScreen&&l.currentScreen.update(e)},h=Object(i.e)(d),setInterval((function(){return n.innerHTML="FPS: ".concat(Math.floor(h.getFps()))}),1e3);case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}},[[29,1,2]]]);
//# sourceMappingURL=main.5b7479fb.chunk.js.map