(this["webpackJsonpcurnon-ninjump"]=this["webpackJsonpcurnon-ninjump"]||[]).push([[0],{29:function(e,t,n){e.exports=n(58)},31:function(e,t,n){},58:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),c=n(5),o=n(2),i=(n(31),n(0)),u=n(10),s=n(4),d=function(){},f=function(e){var t=e.update,n=void 0===t?d:t,r=e.destroy;return{update:n,destroy:void 0===r?d:r}},h=n(3),l=n(8),b=n.n(l),v=[],p=function(e,t,n){v.length=0;for(var r=n;r>e;)r-=t;for(;r<-t;)r+=t;var a=r;do{v.push(r),r+=t}while(r<e);for(r=a;r>0;)r-=t,v.push(r);return v},g=function(e,t,n,r){return p(t,n,r*e)},j=function(e,t){var n=e.x,r=e.y,a=Math.min(t[0],t[2],t[4],t[6]),c=Math.max(t[0],t[2],t[4],t[6]),o=Math.min(t[1],t[3],t[5],t[7]),i=Math.max(t[1],t[3],t[5],t[7]);return!(n<a||n>c||r<o||r>i)},O=["bed","bath","tv"],w=function(){var e=Object(o.a)(a.a.mark((function e(t){var n,r,c,o,u,d,l,v,g,j,w,m,y,x,M,C,R,_,L,F,S,k,E,P,K,I,T,B,W,Y,A,J,N,V,H,U,q,z,D,G,Q,X,Z,$,ee,te,ne,re,ae,ce,oe,ie,ue,se,de,fe,he,le,be,ve,pe,ge,je,Oe,we,me,ye,xe,Me,Ce,Re,_e,Le,Fe,Se,ke;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.gender,r=void 0===n?0:n,c=t.outfit,o=void 0===c?0:c,u=t.gl,d=t.width,l=t.height,v=t.canvas,e.next=3,Object(i.i)(u,"./curnon-ninjump.atlas");case 3:return g=e.sent,e.next=6,Object(i.i)(u,"./ui.atlas");case 6:return j=e.sent,e.next=9,Object(i.j)(u,"./bg1.png");case 9:return w=e.sent,e.next=12,Object(i.j)(u,"./bg2.jpg");case 12:m=e.sent,y=j.findRegion("deadline"),x="ob_".concat(0===r?"man":"girl"),M=["".concat(x,"_2"),"".concat(x,"_3"),"".concat(x,"_1")],C=[],R=Object(s.a)(O);try{for(R.s();!(_=R.n()).done;)L=_.value,F=g.findRegions(L),C.push(Object(i.c)(.2,F))}catch(a){R.e(a)}finally{R.f()}for(S=[],k=0,E=M;k<E.length;k++)P=E[k],K=g.findRegions(P),S.push(Object(i.c)(.05,K));return I=.05*d,T=d,.3,B=d/3,W="".concat(0===r?"man":"girl","_run_").concat(o+1),Y="".concat(0===r?"man":"girl","_jump_").concat(o+1),A=g.findRegions(W),J=g.findRegions(Y),N=Object(i.c)(.13,A),V=Object(i.c)(.05,J),H=Object(i.f)(d,l,d,l),U=Object(i.d)(u),q=b()(u),z=new i.a(v),Q=d,X=d/4,1,$=D=l/5,ee=G=l/3,te={},ne=-T,re=!1,ae=0,ce=!1,oe=Z=I,ie=0,ue=function(){ce||(ae=re?1.5*-Q:1.5*Q,ce=!0,ie=Se,oe=Z)},z.addEventListener("touchStart",ue),document.addEventListener("keydown",ue),se={},de=function(){var e=$-D;for(var t in te)(t=parseFloat(t))+T<e&&(delete te[t],delete se[t]);for(;ne<e+l;){var n=!1,r=0;for((ne+=T)>l&&(n=Math.random()<.3,r=.5),te[ne]=n,se[ne]=[];r>0;){if(Math.random()<r){var a=Math.random()*(T-B)+ne,c=n?4:2,o=Math.floor(Math.random()*c),i=Math.floor(3*Math.random());se[ne].push({obstacleY:a,obstacleWall:o,obstacleType:i})}r-=.3}}},fe=function(){for(var e in U.setColor(0,0,0,.7),te){e=parseFloat(e);var t=l-(e-$+D)-T;Object(i.h)(U,q,0,t,I,T),Object(i.h)(U,q,d-I,t,I,T),te[e]&&(Object(i.h)(U,q,d/2-I/2,t,I,T),U.setColor(0,0,0,.3),Object(i.h)(U,q,d/2-I/2+I/4,t+I/4,I,T),U.setColor(0,0,0,.7))}U.setColor(1,1,1,1)},he=D,le=function(){var e=re?Z-X:Z,t=l-(he+=.1*(D-he))-X/2,n=X/2,r=re?1:-1;ce?(e=re?Z:Z-X,be?e=re?Math.min(e,d/2-I/2-X):Math.max(e,d/2+I/2):(e=Math.max(e,I),e=Math.min(e,d-I-X)),V.getKeyFrame(Se-ie,h.a.NORMAL).draw(U,e,t,150*X/115,X,n,0,0,r,1)):N.getKeyFrame(Se,h.a.LOOP).draw(U,e,t,X,X,n,0,0,r,1)},be=!1,ve=function(e,t){if(!ce&&!pe)return!1;var n=T*Math.floor($/T),r=te[n],a=!1,c=!1,o=Math.abs(e-oe);return r&&!be&&o<d/2-I&&(!re&&t>=d/2-I/2&&(Z=d/2-I/2,a=!0,c=!0),re&&t<=d/2+I/2&&(Z=d/2+I/2,a=!0,c=!0)),t<=I&&(Z=I,a=!0),t>=d-I&&(Z=d-I,a=!0),a&&(ce=!1,ae=0,re=!re,pe=!1,be=!!c),a},pe=!1,ge=function(){if(be&&!ce){var e=T*Math.floor($/T);te[e]||(ce=!0,ae=(re=!re)?-Q:Q,be=!1,pe=!0)}},je=d,Oe=w.height*je/w.width,we=m.height*je/m.width,me=function(){var e,t=p(l,we,.5*$),n=Object(s.a)(t);try{for(n.s();!(e=n.n()).done;){var r=e.value;U.draw(m,0,r,je,we)}}catch(a){n.e(a)}finally{n.f()}var c,o=p(l,Oe,$),i=Object(s.a)(o);try{for(i.s();!(c=i.n()).done;){var u=c.value;U.draw(w,0,u,je,Oe)}}catch(a){i.e(a)}finally{i.f()}},ye=function(){for(var e in se){var t,n=se[e],r=Object(s.a)(n);try{for(r.s();!(t=r.n()).done;){var c=t.value,o=c.obstacleY,i=c.obstacleWall,u=c.obstacleType,f=c.hit,b=c.hitTime,v=void 0;v=0===i?I-.1*B:1===i?d-I-B+.1*B:2===i?d/2-I/2-B+.1*B:d/2+I/2-.1*B;var p=l-(o-$+D)-B,g=1===i||2===i;if(f)S[u].getKeyFrame(Se-b,h.a.NORMAL).draw(U,v,p-B/2,B,B,B/2,B/2,0,g?2:-2,2);else C[u].getKeyFrame(Se,h.a.LOOP).draw(U,v,p,B,B,B/2,B/2,g?-Math.PI/2:Math.PI/2)}}catch(a){r.e(a)}finally{r.f()}}},xe=0,Me=function(){var e;if(!ce)for(var t in e=Z===I?0:Z===d-I?1:Z===d/2-I/2?2:3,se){var n,r=se[t],c=Object(s.a)(r);try{for(c.s();!(n=c.n()).done;){var o=n.value,i=o.obstacleWall,u=o.obstacleY;!o.hit&&i===e&&$>=u&&$<=u+B&&(o.hit=!0,o.hitTime=Se,xe=Se+1,ee=G/2,D*=.75,Fe*=1.5)}}catch(a){c.e(a)}finally{c.f()}}},Re=(Ce=d)/y.width*y.height,_e=l-Re,Le=1,Fe=-.3,Se=0,ke=function(e){Se+=e,U.setProjection(H.combined),U.begin(),Se>=xe&&(ee=G),$+=ee*e,ve(Z,Z+ae*e)||(Z+=ae*e),ge(),de(),Me(),me(),fe(),ye(),le(),(Le+=Fe*e)<0?(Le=0,Fe=-Fe):Le>1&&(Le=1,Fe=-Fe),U.setColor(1,1,1,Le),y.draw(U,0,_e,Ce,Re),U.setColor(1,1,1,1),U.end()},e.abrupt("return",f({update:ke,destroy:function(){z.cleanup(),document.removeEventListener("keydown",ue)}}));case 77:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=Object(o.a)(a.a.mark((function e(t){var n,r,c,d,l,v,p,O,m,y,x,M,C,R,_,L,F,S,k,E,P,K,I,T,B,W,Y,A,J,N,V,H,U,q,z,D,G,Q,X,Z,$,ee,te,ne;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.gl,r=t.width,c=t.height,d=t.pixelRatio,l=t.canvas,v=t.gender,p=new i.a(l),O=Object(i.f)(r,c,r,c),m=Object(i.d)(n),y=b()(n),e.next=7,Object(i.i)(n,"./curnon-ninjump.atlas");case 7:return x=e.sent,e.next=10,Object(i.i)(n,"./ui.atlas");case 10:for(M=e.sent,C=0===v?"man_run_":"girl_run_",L=[],F=0;F<3;F++)S="".concat(C).concat(F+1),k=x.findRegions(S),R=k[0].width,_=k[0].height,L.push(Object(i.c)(.13,k));return E=M.findRegion("gender-header"),e.next=17,Object(i.j)(n,"./bg1.png");case 17:for(P=e.sent,I=(r-3*(K=.25*r))/4,T=(c-K)/2,B=[],W=[],Y=10,J=(A=.8*K)/R*_,N=0;N<3;N++)V=I*(N+1)+K*N,B.push(V),W.push([V,T,V+K,T,V+K,T+K,V,T+K]);return H=r,U=P.height*H/P.width,q=.8*r,z=.1*r,D=E.height/E.width*q,G=T-2.5*D,Q=[1,0,0,.5],X=[0,0,0,.5],Z=-1,$=new i.b,ee=new i.b,p.addEventListener("touchStart",(function(e,t){e*=d,t*=d,$.set(e,t),O.unprojectVector2(ee,$);for(var n=0;n<W.length;n++){var r=W[n];if(j(ee,r)){Z=n;break}}})),p.addEventListener("touchEnd",Object(o.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.outfit=Z,e.t0=t,e.next=4,w(t);case 4:e.t1=e.sent,e.t0.setCurrentScreen.call(e.t0,e.t1),Z=-1;case 7:case"end":return e.stop()}}),e)})))),te=0,ne=function(e){te+=e,m.setProjection(O.combined),m.begin();var t,n=g(te,c,U,c/3),a=Object(s.a)(n);try{for(a.s();!(t=a.n()).done;){var o=t.value;m.draw(P,0,o,H,U)}}catch(C){a.e(C)}finally{a.f()}m.setColor(1,1,1,.5),Object(i.h)(m,y,0,0,r,c),m.setColor(1,1,1,.7),E.draw(m,z,G,q,D),m.setColor(0,0,0,.2);var d,f=Object(s.a)(B);try{for(f.s();!(d=f.n()).done;){var l=d.value;Object(i.h)(m,y,l,T,K,K,0,0,0)}}catch(C){f.e(C)}finally{f.f()}m.setColor(1,1,1,1);for(var b=0;b<W.length;b++){var v=W[b],p=Z===b?Q:X;i.g.apply(void 0,[m,y,v,Y].concat(Object(u.a)(p)))}for(var j=0;j<3;j++){var w=L[j].getKeyFrame(te,h.a.LOOP),x=B[j]+K-A,M=T+K/2-J/2;w.draw(m,x,M,A,J)}m.end()},e.abrupt("return",f({update:ne,destroy:function(){p.cleanup()}}));case 43:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=Object(o.a)(a.a.mark((function e(t){var n,r,c,d,l,v,p,O,w,y,x,M,C,R,_,L,F,S,k,E,P,K,I,T,B,W,Y,A,J,N,V,H,U,q,z,D,G,Q,X,Z,$,ee,te,ne,re,ae,ce,oe,ie,ue;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.gl,r=t.width,c=t.height,d=t.pixelRatio,l=t.canvas,v=new i.a(l),p=Object(i.f)(r,c,r,c),O=Object(i.d)(n),w=b()(n),e.next=7,Object(i.i)(n,"./curnon-ninjump.atlas");case 7:return y=e.sent,e.next=10,Object(i.i)(n,"./ui.atlas");case 10:return x=e.sent,M=[x.findRegion("gender-girl"),x.findRegion("gender-header"),x.findRegion("gender-man")],C=M[0],R=M[1],_=M[2],L=y.findRegions("girl_run_1"),F=Object(i.c)(.13,L),S=y.findRegions("man_run_1"),k=Object(i.c)(.13,S),e.next=18,Object(i.j)(n,"./bg1.png");case 18:return E=e.sent,B=[K=.05*r,T=(c-(P=.4*r))/2,K+P,T,K+P,T+P,K,T+P],W=[I=.55*r,T,I+P,T,I+P,T+P,I,T+P],Y=20,J=(A=.8*P)/L[0].width*L[0].height,N=I+P-A,V=K+P-A,H=T+P/2-J/2,U=r,q=E.height*U/E.width,z=.8*r,D=.1*r,G=R.height/R.width*z,Q=T-2.5*G,Z=(X=.5*P)/C.width*C.height,$=T+P+5,ee=K+.25*P,te=I+.1*P,ne=[1,0,0,.5],re=[0,0,0,.5],ae=-1,ce=new i.b,oe=new i.b,v.addEventListener("touchStart",(function(e,t){e*=d,t*=d,ce.set(e,t),p.unprojectVector2(oe,ce),ae=j(oe,B)?0:j(oe,W)?1:-1})),v.addEventListener("touchEnd",Object(o.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.gender=ae,e.t0=t,e.next=4,m(t);case 4:e.t1=e.sent,e.t0.setCurrentScreen.call(e.t0,e.t1),ae=-1;case 7:case"end":return e.stop()}}),e)})))),ie=0,ue=function(e){ie+=e,O.setProjection(p.combined),O.begin();var t,n=g(ie,c,q,c/3),a=Object(s.a)(n);try{for(a.s();!(t=a.n()).done;){var o=t.value;O.draw(E,0,o,U,q)}}catch(l){a.e(l)}finally{a.f()}O.setColor(1,1,1,.5),Object(i.h)(O,w,0,0,r,c),O.setColor(1,1,1,.7),R.draw(O,D,Q,z,G),C.draw(O,te,$,X,Z),_.draw(O,ee,$,X,Z),O.setColor(0,0,0,.2),Object(i.h)(O,w,K,T,P,P,0,0,0),Object(i.h)(O,w,I,T,P,P,0,0,0),O.setColor(1,1,1,1);var d=0===ae?ne:re;i.g.apply(void 0,[O,w,B,Y].concat(Object(u.a)(d)));var f=1===ae?ne:re;i.g.apply(void 0,[O,w,W,Y].concat(Object(u.a)(f))),F.getKeyFrame(ie,h.a.LOOP).draw(O,N,H,A,J),k.getKeyFrame(ie,h.a.LOOP).draw(O,V,H,A,J),O.end()},e.abrupt("return",f({update:ue,destroy:function(){v.cleanup()}}));case 52:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();(function(){var e=Object(o.a)(a.a.mark((function e(){var t,n,r,o,u,s,d,f,h,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=document.getElementById("main"),n=document.getElementById("info"),r=Object(i.k)(t),o=Object(c.a)(r,2),u=o[0],s=o[1],d=t.getContext("webgl"),f={width:u,height:s,canvas:t,gl:d,pixelRatio:window.devicePixelRatio||1,setCurrentScreen:function(e){f.currentScreen&&f.currentScreen.destroy(),f.currentScreen=e}},e.t0=f,e.next=8,y(f);case 8:e.t1=e.sent,e.t0.setCurrentScreen.call(e.t0,e.t1),d.clearColor(1,1,1,1),h=function(e){d.clear(d.COLOR_BUFFER_BIT),f.currentScreen&&f.currentScreen.update(e)},l=Object(i.e)(h),setInterval((function(){return n.innerHTML="FPS: ".concat(Math.floor(l.getFps()))}),1e3);case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}},[[29,1,2]]]);
//# sourceMappingURL=main.8173eb1e.chunk.js.map